/*
 (c) 2017 Andrea Giammarchi @WebReflection, (ISC)  Copyright (c) 2017, Andrea Giammarchi, @WebReflection  (C) 2017 Andrea Giammarchi - @WebReflection - ISC License */
'use strict';(function(M){function z(b){if(g[b])return g[b].exports;var e=g[b]={i:b,l:!1,exports:{}};M[b].call(e.exports,e,e.exports,z);e.l=!0;return e.exports}var g={};z.m=M;z.c=g;z.d=function(b,e,d){z.o(b,e)||Object.defineProperty(b,e,{configurable:!1,enumerable:!0,get:d})};z.n=function(b){var e=b&&b.__esModule?function(){return b["default"]}:function(){return b};z.d(e,"a",e);return e};z.o=function(b,e){return Object.prototype.hasOwnProperty.call(b,e)};z.p="";return z(z.s=0)})([function(M,z){(function(g){function b(d){if(e[d])return e[d].exports;
var c=e[d]={i:d,l:!1,exports:{}};g[d].call(c.exports,c,c.exports,b);c.l=!0;return c.exports}var e={};b.m=g;b.c=e;b.d=function(d,c,a){b.o(d,c)||Object.defineProperty(d,c,{configurable:!1,enumerable:!0,get:a})};b.n=function(d){var c=d&&d.__esModule?function(){return d["default"]}:function(){return d};b.d(c,"a",c);return c};b.o=function(d,c){return Object.prototype.hasOwnProperty.call(d,c)};b.p="";return b(b.s=14)})([function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function c(){}
c.profile=function(a){return"/profile/"+a};c.nextArticles=function(a){var c={hasMore:!1,nextArticlesPath:""};return a&&""!==a?{hasMore:!0,nextArticlesPath:d.articles+"?page_token="+a}:c};c.article=function(a){return"/article/"+a};c.profileReqExp="/profile/:id";c.about="/about";c.articles="/";c.articleRegExp="/article/:id";c.error="/error";return c}();b.path=d},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(18);b.wire=function(c,a){return d.wire(c,a)};b.bind=function(c){return d.bind(c)}},
function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(28);g=function(){function c(){}c.parseIdToken=function(a){try{return{claims:{admin:JSON.parse(d.base64.decodeUnicode(a.split(".")[1]))[c.adminClaim]},err:null}}catch(p){return{claims:c.defaultClaims,err:p.message}}};c.withClaims=function(a,c){return{signedIn:a.signedIn,uid:a.uid,name:a.name,email:a.email,claims:c}};c.signedOut=function(){return{signedIn:!1,uid:"",name:"",email:"",claims:c.defaultClaims}};c.fromFirebase=function(a){return{signedIn:!0,
uid:a.uid,name:a.displayName||"",email:a.email||"",claims:c.defaultClaims}};c.adminClaim="admin";c.defaultClaims={admin:!1};return c}();b.userBuilder=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(0),c=e(5),a=e(6),p=e(7),q=e(8),r=e(9);(function(a){a[a.Neutral=0]="Neutral";a[a.Loading=1]="Loading";a[a.Done=2]="Done"})(b.PageLoader||(b.PageLoader={}));b.getPresenter=function(){try{var a=JSON.parse(window.__INITIAL_STATE__);return n(a)}catch(m){return{presenter:null,errMessage:m.message}}};
var n=function(k){try{switch(k.path){case d.path.articles:return{presenter:p.ArticleListPresenter.Init(k),errMessage:""};case d.path.articleRegExp:return{presenter:q.ArticlePresenter.Init(k),errMessage:""};case d.path.profileReqExp:return{presenter:c.ProfilePresenter.Init(k),errMessage:""};case d.path.about:return{presenter:a.AboutPresenter.Init(k),errMessage:""};case d.path.error:return{presenter:r.ErrorPresenter.Init(k),errMessage:""};default:return{presenter:null,errMessage:k.path+" not found"}}}catch(m){return{presenter:null,
errMessage:m.message}}}},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function a(){}a.ago=function(a){a||(a=Date.now());return new c(a)};return a}();b.time=g;var d=[{name:"second",limit:60,in_seconds:1},{name:"minute",limit:3600,in_seconds:60},{name:"hour",limit:86400,in_seconds:3600},{name:"day",limit:604800,in_seconds:86400},{name:"week",limit:2629743,in_seconds:604800},{name:"month",limit:31556926,in_seconds:2629743},{name:"year",limit:null,in_seconds:31556926}],
c=function(){function a(a){this.now=a}a.prototype.time=function(a){var c=(this.now-a)/1E3;if(0>c)return"future";if(5>c)return"now";for(var p=0;p<d.length;p++)if(a=d[p],!a.limit||c<a.limit)return c=Math.floor(c/a.in_seconds),a=a.name,1<c&&(a+="s"),c+" "+a+" ago"};return a}()},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(0);g=function(){function c(a){this.title="Profile";this.isPresenter=!0;this.path=d.path.profileReqExp;this.pageLoader=a.pageLoader;this.currentUser=a.currentUser;
this.userProfile=a.userProfile}c.Next=function(a,d){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser,userProfile:d})};c.Init=function(a){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser,userProfile:a.userProfile})};c.prototype.toJSON=function(){return JSON.stringify(this.toObject())};c.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,userProfile:this.userProfile}};
return c}();b.ProfilePresenter=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(0);g=function(){function c(a){this.title="About";this.isPresenter=!0;this.path=d.path.about;this.pageLoader=a.pageLoader;this.currentUser=a.currentUser}c.Init=function(a){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser})};c.prototype.toJSON=function(){return JSON.stringify(this.toObject())};c.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,
path:this.path,currentUser:this.currentUser}};return c}();b.AboutPresenter=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(0);g=function(){function c(a){this.title="Articles";this.isPresenter=!0;this.path=d.path.articles;this.pageLoader=a.pageLoader;this.currentUser=a.currentUser;this.articleList=a.articleList}c.Next=function(a,d){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser,articleList:d})};c.Init=function(a){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser,
articleList:a.articleList})};c.prototype.toJSON=function(){return JSON.stringify(this.toObject())};c.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,articleList:this.articleList}};return c}();b.ArticleListPresenter=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(0);g=function(){function c(a){this.title="Article";this.isPresenter=!0;this.path=d.path.articleRegExp;this.pageLoader=
a.pageLoader;this.currentUser=a.currentUser;this.article=a.article}c.Next=function(a,d){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser,article:d})};c.Init=function(a){return new c({pageLoader:a.pageLoader,currentUser:a.currentUser,article:a.article})};c.prototype.toJSON=function(){return JSON.stringify(this.toObject())};c.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,article:this.article}};
return c}();b.ArticlePresenter=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(0);g=function(){function c(a){this.isPresenter=!0;this.path=d.path.error;this.pageLoader=a.pageLoader;this.currentUser=a.currentUser;this.title=a.title;this.message=a.message}c.FromCode=function(a,d){switch(a){case 404:return new c({pageLoader:d.pageLoader,title:"Not Found",message:"Page Not Found",currentUser:d.currentUser});default:return new c({pageLoader:d.pageLoader,title:"Internal Error",
message:"Internal Error",currentUser:d.currentUser})}};c.Init=function(a){return new c({pageLoader:a.pageLoader,title:a.title,currentUser:a.currentUser,message:a.message})};c.prototype.toJSON=function(){return JSON.stringify(this.toObject())};c.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,message:this.message}};return c}();b.ErrorPresenter=g},function(g,b,e){Object.defineProperty(b,"__esModule",
{value:!0});g=function(){function d(){}d.pageProgressBar="viperfire-progress-bar";d.errHighlight="error-highlight";d.highlight="highlight";d.error="error";d.hide="hide";d.show="";d.empty="";d.neutral="";d.loading="loading";d.done="done";return d}();b.css=g},function(g,b){g.exports=firebase},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function d(){}d.profile=function(c){return d.profiles+"/"+c};d.error=function(c){return d.errors+"/"+c};d.article=function(c){return d.articles+
"/"+c};d.profiles="profiles";d.errors="errors";d.articles="articles";return d}();b.path=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d;(function(c){c[c.OK=200]="OK";c[c.InternalError=500]="InternalError";c[c.NotFound=404]="NotFound"})(d=b.statusCode||(b.statusCode={}));b.domainNotFound=function(c){return{code:d.NotFound,err:c+" Not Found"}};b.domainInternalError=function(c,a){return{code:d.InternalError,err:c+" Internal Error="+a}}},function(g,b,e){Object.defineProperty(b,
"__esModule",{value:!0});var d=e(15),c=e(3),a=e(27),p=e(29),q=e(36);b=e(38);g=e(39);e=e(40);d=d.getClientConfig();a=a.log(d.isOnline);a.info("init app start");var r=document.getElementById("app");if(r){var n=c.getPresenter();c=n.presenter;n=n.errMessage;if(null===c)a.error("getPresenter() failed; error="+n);else{p=new p.Domain({logger:a});var k=p.auth().currentUser().getFromCache();n=k.currentUser;k=k.err;null===n?a.info("auth().currentUser().getFromCache() failed; reason="+k):c.currentUser=n;q=new q.Page({view:d.view,
body:r,presenter:c,logger:a});q.render();b=new b.App({domain:p,page:q,logger:a});new g.ActionHandler({app:b,domain:p,logger:a});e.router(b);a.info("init app done")}}else a.error("could not find id: #app")},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(16),c=e(22),a=e(23),p=e(24),q=e(25),r=e(26);b.getServerConfig=function(){return n()};b.getClientConfig=function(){return n()};var n=function(){var k={header:new p.HeaderView({logo:{name:"Viperfire",url:"/"}}),articleList:new c.ArticleListView,
about:new a.AboutView({hyperLink:{name:"HyperHTML",url:"https://github.com/WebReflection/hyperHTML"},viperLink:{name:"ViperHTML",url:"https://github.com/WebReflection/viperhtml"},links:[{name:"HyperHTML",url:"https://github.com/WebReflection/hyperHTML"},{name:"ViperHTML",url:"https://github.com/WebReflection/viperhtml"}]}),footer:new q.FooterView({links:[{name:"Home",url:"/"},{name:"About",url:"/about"}]})};return{isOnline:r.env.online,view:new d.View(k)}}},function(g,b,e){Object.defineProperty(b,
"__esModule",{value:!0});var d=e(17),c=e(19),a=e(20),p=e(0),q=e(21);g=function(){function b(b){this.pageLoader=new q.PageLoaderView;this.article=new d.ArticleView;this.profile=new c.ProfileView;this.error=new a.ErrorView;this.header=b.header;this.footer=b.footer;this.articleList=b.articleList;this.about=b.about}b.prototype.renderArticleList=function(a,c){return this.render(a,c,this.articleList.render(c))};b.prototype.renderArticle=function(a,c){return this.render(a,c,this.article.render(c))};b.prototype.renderProfile=
function(a,c){return this.render(a,c,this.profile.render(c))};b.prototype.renderAbout=function(a,c){return this.render(a,c,this.about.render())};b.prototype.renderError=function(a,c){return this.render(a,c,this.error.render(c))};b.prototype.render=function(a,c,d){var h=[],f=c.currentUser;f.signedIn&&(h[0]={name:"My Profile",url:p.path.profile(f.uid)});return l=["\n            ",'\n            <div class="container">\n                <header>',"</header>\n                <main>","</main>\n                <footer>",
"</footer>\n            </div>\n        "],l.raw=["\n            ",'\n            <div class="container">\n                <header>',"</header>\n                <main>","</main>\n                <footer>","</footer>\n            </div>\n        "],a(l,[this.pageLoader.render(c)],[this.header.render(f)],[d],[this.footer.render({links:h})]);var l};return b}();b.View=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1),c=e(4);g=function(){function a(){this.html=d.wire(this)}
a.prototype.render=function(a){var d=c.time.ago();return b=['\n            <div class="article">\n                <h1>',"</h1>\n                <p>","</p>\n                <div>Created: ","</div>\n                <div>Published: ","</div>\n            </div>\n        "],b.raw=['\n            <div class="article">\n                <h1>',"</h1>\n                <p>","</p>\n                <div>Created: ","</div>\n                <div>Published: ","</div>\n            </div>\n        "],this.html(b,
a.article.title,a.article.bodyText,d.time(a.article.createTime),d.time(a.article.publishTime));var b};return a}();b.ArticleView=g},function(g,b){b=function(b,d){function c(c){return 2>arguments.length?null==c?H("html"):"string"==typeof c?p(null,c):"raw"in c?H("html")(c):"nodeType"in c?a(c):fa(c,"html"):("raw"in c?H("html"):p).apply(null,arguments)}function a(a){return n.bind(a)}function p(a,c){return 1>arguments.length?H("html"):null==a?H(c||"html"):fa(a,c||"html")}function e(){}function g(a,c){return this.node=
a,this.childNodes=c,d.aura(this,c)}function n(a){var c=V.get(this);return c&&c.template===N(a)?W.apply(c.updates,arguments):za.apply(this,arguments),this}function k(a,c,f){var h,d,b,w=a.ownerElement,l="data"===f,m=!l&&/^on/.test(f),k=l||B(w,f)&&!Aa.test(f),p=m?f.slice(2):"",n=k||m,x=k&&(l||f in w);return(m||x)&&(c.push(w,f),m&&(p===K||p===X?ha.add(w):f.toLowerCase()in w&&(p=p.toLowerCase()))),k&&(x||(b=O.get(w),b||(b={_:Object.create(null),$:function(){O.delete(w);for(var a in this._)this._[a].$()}},
O.set(w,b)),b._[f]={_:null,$:function(){x=!0;d(this._)}}),d=function(c){x?h!==c&&(h=c,w[f]!==c&&(null==c?(w[f]=null,w.removeAttribute(f)):w[f]=c)):(a.value=c,b._[f]._=c,f in w&&b.$())}),m?function(a){h!==a&&(h&&w.removeEventListener(p,h,!1),h=a,a&&w.addEventListener(p,a,!1))}:k?d:function(c){h!==c&&(h=c,a.value!==c&&(null==c?n||(n=!0,w.removeAttributeNode(a)):(a.value=c,n&&(n=!1,w.setAttributeNode(a)))))}}function m(a){var c;return function(f){f!==c&&(c=f,a.textContent=f)}}function h(a,c,f){var h;
return function A(b){switch(typeof b){case "string":case "number":case "boolean":var d=c.length;1===d&&c[0].nodeType===Y?h!==b&&(h=b,c[0].textContent=b):(h=b,d?f.splice(0,d,a.ownerDocument.createTextNode(b)):c[0]=a.parentNode.insertBefore(a.ownerDocument.createTextNode(b),a));break;case "function":A(b(a.parentNode,c,0));break;case "object":case "undefined":if(null==b){h=b;A("");break}b instanceof e&&(b=b.render());default:if(h=b,ia(b))if(d=b.length,0===d)f.splice(0);else switch(typeof b[0]){case "string":case "number":case "boolean":A({html:b});
break;case "function":for(var w=a.parentNode,l=0;l<d;l++)b[l]=b[l](w,c,l);A(b.concat.apply([],b));break;case "object":ia(b[0])&&(b=b.concat.apply([],b));d=b[0];if(null!=d&&"then"in d){Promise.all(b).then(A);break}l=0;for(d=b.length;l<d;l++)b[l]instanceof e&&(b[l]=b[l].render());default:D(f,b)}else"ELEMENT_NODE"in b?D(f,b.nodeType===ja?F.call(b.childNodes):[b]):null!=b&&"then"in b?b.then(A):"placeholder"in b?(A(b.placeholder),"text"in b?Promise.resolve(b.text).then(String).then(A):"any"in b?Promise.resolve(b.any).then(A):
"html"in b?Promise.resolve(b.html).then(x).then(A):Promise.resolve(v(b,A)).then(A)):"text"in b?A(String(b.text)):"any"in b?A(b.any):"html"in b?(b=[].concat(b.html).join(""),f.splice(0),b=(T in a?ka:E)(a,b.replace(la,ma)),c.push.apply(c,b.childNodes),a.parentNode.insertBefore(b,a)):A("length"in b?F.call(b):v(b,A))}}}function f(a,c,b){for(var h,d=a.childNodes,l=d.length,w=0;w<l;w++)switch(h=d[w],h.nodeType){case I:for(var m,k=void 0,p=void 0,n=void 0,x=h,e=c,ya=b,g=Object.create(null),E=x.attributes,
q=0,u=E.length;q<u;q++)m=E[q],m.value===G&&(n=m.name,n in g?(x.removeAttributeNode(m),g[n].value="",x.setAttributeNode(g[n]),u--,q--):(p=ya.shift().replace(/^(?:|[\S\s]*?\s)(\S+?)=['"]?$/,"$1"),k=x.attributes,g[n]=k[p]||k[p.toLowerCase()],e.push(y("attr",g[n],p))));f(h,c,b);break;case na:h.textContent===G&&(b.shift(),c.push(y("any",h)));break;case Y:Ba.test(a.nodeName)&&oa.call(h.textContent)===U&&(b.shift(),c.push(y("text",a)))}}function l(a){return Ca[a]}function x(a){return{html:a}}function E(a,
c){var b,f=a.ownerDocument;a=f.createElement(/<([a-z][a-z0-9]*(?:-[a-z0-9]+)+)[\s\S]*?>[\s\S]*?<\/\1>/i.test(c)?"div":"template");var h="content"in a,d=!1;(h||(b=f.createDocumentFragment(),d=/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(c)),d)?(f=RegExp.$1,a.innerHTML="<table>"+c+"</table>",P(b,F.call(a.querySelectorAll(f)))):(a.innerHTML=c,h?b=a.content:P(b,F.call(a.childNodes)));return b}function ka(a,c){var b=a.ownerDocument;a=b.createDocumentFragment();Q||Z?(b=b.createElement("div"),
b.innerHTML='<svg xmlns="'+aa+'">'+c+"</svg>",P(a,F.call(b.firstChild.childNodes))):(b=b.createElementNS(aa,"svg"),b.innerHTML=c,P(a,F.call(b.childNodes)));return a}function u(a,c){for(var b,f,h=c===K,d=0,l=a.length;d<l;d++)f=a[d],f.nodeType===I&&(b=t(f,h,c,b))}function t(a,c,b,f){if(ha.has(a))a.dispatchEvent(f||(f=new pa(b)));else if(c&&O.has(a))O.get(a).$();else{a=L(a);for(var h=0,d=a.length;h<d;h++)f=t(a[h],c,b,f)}return f}function B(a,b){var f=!(T in a);if(f&&/-/.test(a.nodeName)){var h=c.document;
(h=(h=h.customElements||h.defaultView.customElements)&&h.get(a.nodeName.toLowerCase()))&&(a=h.prototype)}return f&&b in a}function v(a,c){for(var b,f=0,h=ba.length;f<h;f++)if(b=ba[f],a.hasOwnProperty(b))return ca[b](a[b],c)}function C(a,c){var b="_"+a+"$";return{get:function(){return this[b]||(this[a]=c.call(this,a))},set:function(a){Da(this,b,{configurable:!0,value:a})}}}function D(a,b){var f=0,h=a.length;if(b.length!==h)d(a,b,c.MAX_LIST_SIZE);else for(;f<h--;f++)if(a[h]!==b[h]||a[f]!==b[f])return void d(a,
b,c.MAX_LIST_SIZE)}function z(a){for(var c=0,b=a.length;c<b;c++)a[c++].removeAttribute(a[c])}function R(a,c,b,f){switch(a.type){case "any":var d=h(c,f,new g(c,f));break;case "attr":d=k(c,b,a.name);break;case "text":d=m(c)}return d}function y(a,c,b){var f=[];switch(c.nodeType){case I:case ja:var h=c;break;case na:h=c.parentNode;f.unshift("childNodes",f.indexOf.call(h.childNodes,c));break;default:h=c.ownerElement,f.unshift("attributes",c.name)}for(c=h;h=h.parentNode;c=h)f.unshift("children",f.indexOf.call(L(h),
c));return{type:a,path:f,name:b}}function M(a){var c="_"+a.join(U);return qa[c]||(qa[c]=a)}function ra(a,c){var b=c.previousSibling;b&&b.nodeType===Y&&(a.removeChild(b),ra(a,c))}function W(){for(var a=1,c=arguments.length;a<c;a++)this[a-1](arguments[a])}function za(a){a=N(a);var c;if(!(c=sa.get(a))){c=a;var b=[];var h=c.join(U);h=(T in this?ka:E)(this,h.replace(la,ma));var d={fragment:h,paths:b};c=(f(h,b,c.slice()),sa.set(c,d),d)}b=c;if(da){c=ta(b.fragment);b=b.paths;d=[];for(var l=[],m=0,k=b.length;m<
k;m++)h=b[m],d[m]=R(h,ea(c,h.path),l,[]);b=(z(l),d);V.set(this,{template:a,updates:b});W.apply(b,arguments);this.textContent="";this.appendChild(c)}else{c=b.fragment;b=b.paths;d=[];l=[];m=0;for(k=b.length;m<k;m++){h=[];var p=b[m];var n=m,x=p,e=this,g=c,q=h,u=e,w=e.ownerDocument;p=p.path;for(var r=ea(g,p),t=0,B=p.length;t<B;t++)switch(p[t++]){case "attributes":u=r.name;e.hasAttribute(u)||e.setAttribute(u,"");u=e.attributes[u];break;case "childNodes":var v=L(e),D=L(r.parentNode),C=(u=Ea(r))?p.indexOf.call(D,
u)+1:-1,y=(u=ua(r))?p.indexOf.call(D,u):-1;switch(u=w.createComment(G),!0){case 0>y:y=v.length;break;case 0>C:C=0;default:y=-(D.length-y)}q.push.apply(q,F.call(v,C,y));q.length?(v=e,y=u,(D=ua(q[q.length-1]))?v.insertBefore(y,D):v.appendChild(y)):(D=e,C=u,(v=F.call(v,y)[0])?D.insertBefore(C,v):D.appendChild(C));0===q.length&&ra(e,u);break;default:e=u=L(e)[p[t]]||e.appendChild(e.ownerDocument.createElement(ea(g,p.slice(0,t+1)).nodeName))}d[n]=R(x,u,l,h)}b=(z(l),d);V.set(this,{template:a,updates:b});
W.apply(b,arguments)}}function H(b){function f(c){p=c.createDocumentFragment();m="svg"===b?c.createElementNS(aa,"svg"):p;k=a(m)}function h(){if(n){n=!1;"svg"===b&&P(p,F.call(m.childNodes));for(var a,c=[],f=p.childNodes,h=0,d=f.length;h<d;h++)a=f[h],a.nodeType!==I&&0===oa.call(a.textContent).length||c.push(a);l=1===c.length?c[0]:c}return l}var d,l,m,p,k,n,e;return"adopt"===b?function(a){var l=arguments;return a=N(a),e!==a&&(n=!0,e=a,d=function(a,d,e){return n&&(e<d.length?(m=d[e],p={ownerDocument:m.ownerDocument,
childNodes:[m],children:[m]},k=c.adopt(p)):(T in a&&(b="svg"),f(a.ownerDocument))),k.apply(null,l),h()}),d}:function(a){return a=N(a),e!==a&&(n=!0,e=a,f(c.document)),k.apply(null,arguments),h()}}function fa(a,c){var b=va.get(a),f=c.indexOf(":"),h=c;return-1<f&&(h=c.slice(f+1),c=c.slice(0,f)||"html"),b||(b={},va.set(a,b)),b[h]||(b[h]=H(c))}c.document=b;c.hyper=c;c.adopt=function(a){return function(){return da=!1,n.apply(a,arguments),da=!0,a}};c.bind=a;c.define=function(a,c){a in ca||ba.push(a);ca[a]=
c};c.escape=function(a){return a.replace(/[&<>'"]/g,l)};c.wire=p;c.Component=e;Object.defineProperties(e.prototype,{handleEvent:{value:function(a){var c=a.currentTarget;this["getAttribute"in c&&c.getAttribute("data-call")||"on"+a.type](a)}},html:C("html",H),svg:C("svg",H),state:C("state",function(){return this.defaultState}),defaultState:{get:function(){return{}}},setState:{value:function(a){var c=this.state;a="function"==typeof a?a.call(this,c):a;for(var b in a)c[b]=a[b];this.render()}}});var I=
1,Y=3,na=8,ja=11,T="ownerSVGElement",aa="http://www.w3.org/2000/svg",Aa=/^style$/i,Ba=/^style|textarea$/i,G="_hyper: "+(Math.random()*new Date|0)+";",U="\x3c!--"+G+"--\x3e";g.prototype.splice=function(a){var c=this.node;for(var b=this.childNodes,f=b[a+(arguments[1]||0)]||c,h=b.splice.apply(b,arguments),d=c.parentNode,l=0,m=h.length;l<m;l++)c=h[l],0>b.indexOf(c)&&d.removeChild(c);if(l=2,m=arguments.length,l<m){if(1==m-l)c=arguments[l];else for(c=d.ownerDocument.createDocumentFragment();l<m;)c.appendChild(arguments[l++]);
d.insertBefore(c,f)}return h};var J=b.createDocumentFragment(),Fa="object"==typeof navigator&&/Firefox\/(\d+)/.test(navigator.userAgent)&&55>parseFloat(RegExp.$1),Q=function(){var a=b.createElement("p");return a.innerHTML='<i data-i="" class=""></i>',/class/i.test(a.firstChild.attributes[0].name)}(),Z=!("children"in J),N=function(a){return(N=a.propertyIsEnumerable("raw")||Fa?M:function(a){return a})(a)},F=[].slice,Ca={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},K="connected",X="dis"+
K;try{new Event(K);var pa=Event}catch(w){pa=function(a){var b=c.document.createEvent("Event");return b.initEvent(a,!1,!1),b}}try{(new MutationObserver(function(a){for(var c,b=0,f=a.length;b<f;b++)c=a[b],u(c.removedNodes,X),u(c.addedNodes,K)})).observe(b,{subtree:!0,childList:!0})}catch(w){b.addEventListener("DOMNodeInserted",function(a){u([a.target],K)},!1),b.addEventListener("DOMNodeRemoved",function(a){u([a.target],X)},!1)}var S=typeof WeakMap==typeof S?function(){return{delete:function(a){delete a[G]},
get:function(a){return a[G]},has:function(a){return G in a},set:function(a,c){Object.defineProperty(a,G,{configurable:!0,value:c})}}}:WeakMap,wa=typeof WeakSet==typeof wa?function(){var a=new S;return{add:function(c){a.set(c,!0)},has:function(c){return!0===a.get(c)}}}:WeakSet,xa=typeof Map==typeof xa?function(){var a=[],c=[];return{get:function(b){return c[a.indexOf(b)]},set:function(b,f){c[a.push(b)-1]=f}}}:Map,ia=Array.isArray||function(){var a={}.toString,c=a.call([]);return function(b){return a.call(b)===
c}}(),oa="_hyper: ".trim||function(){return this.replace(/^\s+|\s+$/g,"")},Da=Object.defineProperty,ca={},ba=[],qa={},P="append"in J?function(a,c){a.append.apply(a,c)}:function(a,c){for(var b=0,f=c.length;b<f;b++)a.appendChild(c[b])},L=Z||Q?function(a){for(var c=[],b=a.childNodes,f=0,h=0,d=b.length;h<d;h++)a=b[h],a.nodeType===I&&(c[f++]=a);return c}:function(a){return a.children},ea=Q||Z?function(a,c){for(var b,f=0,h=c.length;f<h;f++)switch(b=c[f++]){case "children":a=L(a)[c[f]];break;default:a=a[b][c[f]]}return a}:
function(a,c){for(var b=0,f=c.length;b<f;b++)a=a[c[b++]][c[b]];return a},la=/(<[a-z]+[a-z0-9:_-]*)((?:[^\S]+[^ \f\n\r\t\/>"'=]+(?:=(?:'.*?'|".*?"|<.+?>|\S+))?)+)([^\S]*\/?>)/gi,Ga=new RegExp("([^\\S]+[^ \\f\\n\\r\\t\\/>\"'=]+=)(['\"]?)"+U+"\\2","gi"),ma=function(a,c,b,f){return c+b.replace(Ga,Ha)+f},Ha=function(a,c,b){return c+(b||'"')+G+(b||'"')},ha=new wa,V=new S,va=new S,sa=new xa,O=new S,da=!0,ta=function(){return J.appendChild(J.ownerDocument.createTextNode("g")),J.appendChild(J.ownerDocument.createTextNode("")),
1===J.cloneNode(!0).childNodes.length?function(a){var c=a.cloneNode();a=a.childNodes||[];for(var b=0,f=a.length;b<f;b++)c.appendChild(ta(a[b]));return c}:function(a){return a.cloneNode(!0)}}(),ua=Q?function(a){for(;a=a.nextSibling;)if(a.nodeType===I)return a}:function(a){return a.nextElementSibling},Ea=Q?function(a){for(;a=a.previousSibling;)if(a.nodeType===I)return a}:function(a){return a.previousElementSibling};return c.MAX_LIST_SIZE=1E3,c}(document,function(){function b(b,n,k){var m=b.length,h=
n.length;k=(k||1/0)<Math.sqrt((m||1)*(h||1));if(1>m||k)b=void((h||k)&&b.splice.apply(b,[0,m].concat(n)));else if(1>h)b=void b.splice(0);else{var f=b.length+1,l=n.length+1,e=0,q=0,r=0,u=0;m=new g(f*l);for(m[0]=0;++e<l;)m[e]=e;for(;++q<f;){var t=e=0;var B=u;u=q*l;for(m[u+e]=q;++e<l;){h=m[B+e]+1;k=m[u+t]+1;var v=m[B+t]+(b[r]==n[t]?0:1);m[u+e]=h<k?h<v?h:v:k<v?k:v;++t}r=q}h=[];f=n.length+1;l=b.length+1-1;for(e=f-1;e&&l;)q=l*f+e,t=q-f,k=m[q],v=m[t],q=m[q-1],t=m[t-1],t<=q&&t<=v&&t<=k?(e--,l--,t<k&&d(h,p,
e,l,1,[n[e]])):q<=v&&q<=k?(e--,d(h,a,e,l,0,[n[e]])):(l--,d(h,c,e,l,1,[]));for(;e--;)d(h,a,e,l,0,[n[e]]);for(;l--;)d(h,c,e,l,1,[]);v=0;f=1;if(l=h.length){for(k=m=h[0];f<l;)n=h[f++],m.type===n.type&&1>=n.x-m.x&&1>=n.y-m.y?(k.count+=n.count,k.items=k.items.concat(n.items)):(b.splice.apply(b,[k.y+v,k.count].concat(k.items)),v+=k.type===a?k.items.length:k.type===c?-k.count:0,k=n),m=n;b.splice.apply(b,[k.y+v,k.count].concat(k.items))}b=void 0}return b}function d(a,c,b,d,h,f){a.unshift({type:c,x:b,y:d,count:h,
items:f})}var c="del",a="ins",p="sub",g=/^u/.test(typeof Int32Array)?Array:Int32Array;return b.aura=function(a,c){var b=c.splice;return c.splice=function h(){c.splice=b;var f=a.splice.apply(a,arguments);return c.splice=h,f},c},b}());try{g.exports=b}catch(e){}},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1);g=function(){function c(){this.html=d.wire(this)}c.prototype.render=function(a){return c=["\n            <h2>","</h2>\n            <p>Admin? ","</p>\n        "],c.raw=
["\n            <h2>","</h2>\n            <p>Admin? ","</p>\n        "],this.html(c,a.userProfile.name,a.userProfile.admin);var c};return c}();b.ProfileView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1);g=function(){function c(){this.html=d.wire(this)}c.prototype.render=function(a){return c=['\n            <div class="page-error">\n                <p>',"</p>\n            </div>\n        "],c.raw=['\n            <div class="page-error">\n                <p>',"</p>\n            </div>\n        "],
this.html(c,a.message);var c};return c}();b.ErrorView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1),c=e(3),a=e(10);g=function(){function b(){this.html=d.wire(this)}b.prototype.render=function(b){var d=a.css.pageProgressBar;b.pageLoader===c.PageLoader.Loading&&(d=d+" "+a.css.loading);b.pageLoader===c.PageLoader.Done&&(d=d+" "+a.css.loading+" "+a.css.done);return e=['\n            <div class="','">\n                <div class="background-progress-bar"></div>\n            </div>\n        '],
e.raw=['\n            <div class="','">\n                <div class="background-progress-bar"></div>\n            </div>\n        '],this.html(e,d);var e};return b}();b.PageLoaderView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1),c=e(0),a=e(4);g=function(){function b(){this.html=d.wire(this)}b.prototype.render=function(b){var e=0<b.articleList.length,p=c.path.nextArticles(b.articleList.pageToken),k=p.hasMore;p=p.nextArticlesPath;var m=a.time.ago();return h=['\n            <div class="articles">\n                ',
"\n            </div>\n        "],h.raw=['\n            <div class="articles">\n                ',"\n            </div>\n        "],this.html(h,e?(f=["<ul>\n                        ","\n                    </ul>\n                    ","\n                    "],f.raw=["<ul>\n                        ","\n                    </ul>\n                    ","\n                    "],d.wire()(f,b.articleList.articles.map(function(a){return b=['\n                            <li>\n                                <a href="',
'">',"</a>\n                                <span>","</span>\n                            </li>\n                        "],b.raw=['\n                            <li>\n                                <a href="','">',"</a>\n                                <span>","</span>\n                            </li>\n                        "],d.wire(a)(b,c.path.article(a.id),a.id,m.time(a.createTime));var b}),k?(l=['<a href="','">More</a>'],l.raw=['<a href="','">More</a>'],d.wire()(l,p)):"")):(x=["<p>Found no articles.</p>"],
x.raw=["<p>Found no articles.</p>"],d.wire()(x)));var h,f,l,x};return b}();b.ArticleListView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1);g=function(){function c(a){this.hyperLink=a.hyperLink;this.viperLink=a.viperLink;this.links=a.links;this.html=d.wire(this)}c.prototype.render=function(){return a='\n            <h1>About Viperfire</h1>\n            <p>A starter application hosted on Firebase and using \n                <a href=";">;</a> \n                on the client and <a href=";">;</a> on the server\n            </p>\n            <p>Technologies used:</p>\n            <ul>\n                ;\n            </ul>'.split(";"),
a.raw='\n            <h1>About Viperfire</h1>\n            <p>A starter application hosted on Firebase and using \n                <a href=";">;</a> \n                on the client and <a href=";">;</a> on the server\n            </p>\n            <p>Technologies used:</p>\n            <ul>\n                ;\n            </ul>'.split(";"),this.html(a,this.hyperLink.url,this.hyperLink.name,this.viperLink.url,this.viperLink.name,this.links.map(function(a,c){return b=['\n                    <li><a href="',
'">',"</a></li>"],b.raw=['\n                    <li><a href="','">',"</a></li>"],d.wire(a)(b,a.url,a.name);var b}));var a};return c}();b.AboutView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(10),c=e(1);g=function(){function a(a){this.logo=a.logo;this.html=c.wire(this)}a.prototype.render=function(a){var c=this.logo;if(a.signedIn){var b="header-account-link "+d.css.hide;a="header-account-link"}else b="header-account-link",a="header-account-link "+d.css.hide;return e=
['\n            <a href="','" class="header-logo">','</a>\n            <div class="header-account">\n                <div class="','">\n                    <a href="#sign-in" data-action="signInWithGoogle">Sign In with Google</a>\n                </div>\n                <div class="','">\n                    <a href="#sign-out" data-action="signOut">Sign Out</a>\n                </div>\n            </div>'],e.raw=['\n            <a href="','" class="header-logo">','</a>\n            <div class="header-account">\n                <div class="',
'">\n                    <a href="#sign-in" data-action="signInWithGoogle">Sign In with Google</a>\n                </div>\n                <div class="','">\n                    <a href="#sign-out" data-action="signOut">Sign Out</a>\n                </div>\n            </div>'],this.html(e,c.url,c.name,b,a);var e};return a}();b.HeaderView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1);g=function(){function c(a){this.html=d.wire(this);this.links=a.links}c.prototype.render=
function(a){return c=['\n            <ul class="footer-list">\n                ',"\n                \n                ","\n            </ul>"],c.raw=['\n            <ul class="footer-list">\n                ',"\n                \n                ","\n            </ul>"],this.html(c,this.links.map(function(a,c){return b=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],b.raw=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],d.wire(a)(b,
a.url,a.name);var b}),a.links.map(function(a,c){return b=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],b.raw=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],d.wire(a)(b,a.url,a.name);var b}));var c};return c}();b.FooterView=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function b(){}b.online=!0;return b}();b.env=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});g=e(2);window.__VIPER__=
window.__VIPER__||{user:g.userBuilder.signedOut()};var d=function(){function a(){}a.info=function(a){};a.error=function(a){};a.setUser=function(a){};return a}(),c=function(){function a(){}a.info=function(a){console.info(a)};a.error=function(a){console.error(a)};a.setUser=function(a){window.__VIPER__.user=a};return a}();b.log=function(a){return a?d:c}},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function b(){}b.decodeUnicode=function(c){return decodeURIComponent(atob(c).split("").map(function(a){return"%"+
("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))};return b}();b.base64=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(11),c=e(30),a=e(32),p=e(35);g=function(){function b(b){this.authDomain=new p.AuthDomain(d.app());this.profileDomain=new c.ProfileDomain({firestore:d.firestore(),logger:b.logger});this.articleDomain=new a.ArticleDomain({firestore:d.firestore()})}b.prototype.auth=function(){return this.authDomain};b.prototype.article=function(){return this.articleDomain};
b.prototype.profile=function(){return this.profileDomain};return b}();b.Domain=g},function(g,b,e){var d=this&&this.__awaiter||function(a,b,c,f){return new (c||(c=Promise))(function(h,d){function l(a){try{m(f.next(a))}catch(B){d(B)}}function e(a){try{m(f["throw"](a))}catch(B){d(B)}}function m(a){a.done?h(a.value):(new c(function(b){b(a.value)})).then(l,e)}m((f=f.apply(a,b||[])).next())})},c=this&&this.__generator||function(a,b){function c(a){return function(b){return f([a,b])}}function f(c){if(e)throw new TypeError("Generator is already executing.");
for(;d;)try{if(e=1,m&&(k=m[c[0]&2?"return":c[0]?"throw":"next"])&&!(k=k.call(m,c[1])).done)return k;if(m=0,k)c=[0,k.value];switch(c[0]){case 0:case 1:k=c;break;case 4:return d.label++,{value:c[1],done:!1};case 5:d.label++;m=c[1];c=[0];continue;case 7:c=d.ops.pop();d.trys.pop();continue;default:if(!(k=d.trys,k=0<k.length&&k[k.length-1])&&(6===c[0]||2===c[0])){d=0;continue}if(3===c[0]&&(!k||c[1]>k[0]&&c[1]<k[3]))d.label=c[1];else if(6===c[0]&&d.label<k[1])d.label=k[1],k=c;else if(k&&d.label<k[2])d.label=
k[2],d.ops.push(c);else{k[2]&&d.ops.pop();d.trys.pop();continue}}c=b.call(a,d)}catch(B){c=[6,B],m=0}finally{e=k=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var d={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},e,m,k,p;return p={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p};Object.defineProperty(b,"__esModule",{value:!0});var a=e(12),p=e(13),q=e(31);g=function(){function b(a){this.db=a.firestore;
this.logger=a.logger;this.cache=new r;this.subscriptions=new n}b.prototype.get=function(b){return d(this,void 0,void 0,function(){var h,f,d,e,m,k,n,g,r,v,C;return c(this,function(c){switch(c.label){case 0:h=this.cache[b.uid];f=a.path.profile(b.uid);if(h)return this.logger.info("cache hit "+f),[2,{code:p.statusCode.OK,userProfile:h,err:null}];this.logger.info("cache miss "+f);c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.db.doc(f).get()];case 2:d=c.sent();if(!d.exists)return e=p.domainNotFound(f),
m=e.code,k=e.err,n=q.userProfileBuilder.empty(b.uid),[2,{code:m,userProfile:n,err:k}];g=q.userProfileBuilder.fromDB(d.data());return[2,{code:p.statusCode.OK,userProfile:g,err:null}];case 3:return r=c.sent(),v=p.domainInternalError(f,r.message),m=v.code,k=v.err,C=q.userProfileBuilder.empty(b.uid),[2,{code:m,userProfile:C,err:k}];case 4:return[2]}})})};b.prototype.subscribe=function(c){var b=this,f=a.path.profile(c);this.logger.info("subscribe to "+f);this.subscriptions[c]=this.db.doc(f).onSnapshot(function(a){a.exists?
(b.logger.info("add "+f+" to cache"),b.cache[c]=q.userProfileBuilder.fromDB(a.data()),b.logger.info(f+" updated on "+(a.metadata.hasPendingWrites?"Client":"Server"))):b.unsubscribe(c)})};b.prototype.unsubscribe=function(c){if(""!==c){var b=a.path.profile(c);this.logger.info("unsubscribe to "+b);delete this.cache[c];if(b=this.subscriptions[c])this.logger.info("calling unsubscribe"),b(),this.logger.info("called unsubscribe"),delete this.subscriptions[c]}};return b}();b.ProfileDomain=g;var r=function(){return function(){}}(),
n=function(){return function(){}}()},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(2);g=function(){function a(){}a.empty=function(a){return{uid:a,name:"",email:"",admin:!1,claims:d.userBuilder.defaultClaims}};a.fromDB=function(a){var b=c(a.claims);return{uid:a.uid,name:a.name,email:a.email,admin:b[d.userBuilder.adminClaim],claims:b}};a.fromUser=function(a){var b=c(a.claims);return{uid:a.uid,name:a.name,email:a.email,admin:b[d.userBuilder.adminClaim],claims:b}};a.toUser=
function(a,c){return{signedIn:c,uid:a.uid,name:a.name,email:a.email,claims:a.claims}};return a}();b.userProfileBuilder=g;var c=function(a){return a&&a.hasOwnProperty(d.userBuilder.adminClaim)?a:d.userBuilder.defaultClaims}},function(g,b,e){var d=this&&this.__awaiter||function(a,c,b,h){return new (b||(b=Promise))(function(f,d){function e(a){try{l(h.next(a))}catch(t){d(t)}}function k(a){try{l(h["throw"](a))}catch(t){d(t)}}function l(a){a.done?f(a.value):(new b(function(c){c(a.value)})).then(e,k)}l((h=
h.apply(a,c||[])).next())})},c=this&&this.__generator||function(a,c){function b(a){return function(c){return h([a,c])}}function h(b){if(d)throw new TypeError("Generator is already executing.");for(;f;)try{if(d=1,e&&(k=e[b[0]&2?"return":b[0]?"throw":"next"])&&!(k=k.call(e,b[1])).done)return k;if(e=0,k)b=[0,k.value];switch(b[0]){case 0:case 1:k=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++;e=b[1];b=[0];continue;case 7:b=f.ops.pop();f.trys.pop();continue;default:if(!(k=f.trys,
k=0<k.length&&k[k.length-1])&&(6===b[0]||2===b[0])){f=0;continue}if(3===b[0]&&(!k||b[1]>k[0]&&b[1]<k[3]))f.label=b[1];else if(6===b[0]&&f.label<k[1])f.label=k[1],k=b;else if(k&&f.label<k[2])f.label=k[2],f.ops.push(b);else{k[2]&&f.ops.pop();f.trys.pop();continue}}b=c.call(a,f)}catch(t){b=[6,t],e=0}finally{d=k=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var f={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},d,e,k,p;return p={next:b(0),"throw":b(1),"return":b(2)},
"function"===typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p};Object.defineProperty(b,"__esModule",{value:!0});var a=e(33),p=e(12),q=e(13),r=e(34);g=function(){function b(a){this.limit=3;this.db=a.firestore}b.prototype.get=function(b){return d(this,void 0,void 0,function(){var d,h,f,e,k,g,n,u;return c(this,function(c){switch(c.label){case 0:d=p.path.article(b),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.db.doc(d).get()];case 2:h=c.sent();if(!h.exists)return f=q.domainNotFound(d),
e=f.code,k=f.err,[2,{code:e,article:a.articleBuilder.empty(b),error:k}];g=a.articleBuilder.fromDB(b,h.data());return[2,{code:q.statusCode.OK,article:g,error:null}];case 3:return n=c.sent(),u=q.domainInternalError(d,n.message),e=u.code,k=u.err,[2,{code:e,article:a.articleBuilder.empty(b),error:k}];case 4:return[2]}})})};b.prototype.queryDraft=function(b){return{status:a.Status.Draft,limit:this.limit,pageToken:b||""}};b.prototype.queryPublished=function(b){return{status:a.Status.Published,limit:this.limit,
pageToken:b||""}};b.prototype.all=function(b){return d(this,void 0,void 0,function(){var d,h,f,e,k,g,n,q,t,B,v,C;return c(this,function(c){switch(c.label){case 0:d=this.db.collection(p.path.articles).where("status","==",b.status).limit(b.limit);d=b.status===a.Status.Draft?d.orderBy("createTime","desc"):d.orderBy("publishTime","desc");h={articleList:{length:0,pageToken:"",articles:[]},domainError:null};if(""!==b.pageToken){f=r.parsePageToken(b.pageToken);e=f.pageToken;if(k=f.pageTokenError)return h.domainError=
"could not parse pageToken; error="+k,[2,h];d=d.orderBy("sortID").startAfter(e.time,e.sortID)}c.label=1;case 1:return c.trys.push([1,3,,4]),[4,d.get()];case 2:g=c.sent();if(g.empty)return[2,h];h.articleList.length=g.docs.length;h.articleList.length>=b.limit&&(n=g.docs[h.articleList.length-1].data(),h.articleList.pageToken=n.status===a.Status.Draft?r.newPageToken(n.createTime,n.sortID):r.newPageToken(n.publishTime,n.sortID));q=0;for(t=g.docs;q<t.length;q++)B=t[q],v=a.articleBuilder.fromDB(B.id,B.data()),
h.articleList.articles.push(v);return[2,h];case 3:return C=c.sent(),h.domainError="query article.all() failed; error="+C.message,[2,h];case 4:return[2]}})})};return b}();b.ArticleDomain=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d;(function(b){b.Draft="draft";b.Published="published"})(d=b.Status||(b.Status={}));g=function(){function b(){}b.setSortID=function(a,b){return{id:a.id,sortID:b,title:a.title,bodyText:a.bodyText,author:a.author,commentCount:a.commentCount,status:a.status,
publishTime:a.publishTime,createTime:a.createTime,updateTime:a.updateTime}};b.empty=function(a){return{id:a,sortID:"",title:"",bodyText:"",author:"",commentCount:0,status:d.Draft,publishTime:0x8994df7bcc3c,createTime:Date.now(),updateTime:Date.now()}};b.toDB=function(a){return{sortID:a.sortID,title:a.title,bodyText:a.bodyText,author:a.author,commentCount:a.commentCount,status:a.status,publishTime:a.publishTime,createTime:a.createTime,updateTime:a.updateTime}};b.fromDB=function(a,b){return{id:a,sortID:b.sortID,
title:b.title,bodyText:b.bodyText,author:b.author,commentCount:b.commentCount,status:b.status,publishTime:b.publishTime,createTime:b.createTime,updateTime:b.updateTime}};b.hasError=function(a){return null};return b}();b.articleBuilder=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.newPageToken=function(b,c){return b+"-"+c};b.parsePageToken=function(b){try{var c=b.split("-");return{pageToken:{time:parseInt(c[0],10),sortID:c[1]},pageTokenError:null}}catch(a){return{pageToken:{time:1,
sortID:""},pageTokenError:a.message}}}},function(g,b,e){var d=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(f,h){function e(a){try{l(d.next(a))}catch(t){h(t)}}function k(a){try{l(d["throw"](a))}catch(t){h(t)}}function l(a){a.done?f(a.value):(new c(function(b){b(a.value)})).then(e,k)}l((d=d.apply(a,b||[])).next())})},c=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");
for(;f;)try{if(e=1,k&&(g=k[c[0]&2?"return":c[0]?"throw":"next"])&&!(g=g.call(k,c[1])).done)return g;if(k=0,g)c=[0,g.value];switch(c[0]){case 0:case 1:g=c;break;case 4:return f.label++,{value:c[1],done:!1};case 5:f.label++;k=c[1];c=[0];continue;case 7:c=f.ops.pop();f.trys.pop();continue;default:if(!(g=f.trys,g=0<g.length&&g[g.length-1])&&(6===c[0]||2===c[0])){f=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3]))f.label=c[1];else if(6===c[0]&&f.label<g[1])f.label=g[1],g=c;else if(g&&f.label<g[2])f.label=
g[2],f.ops.push(c);else{g[2]&&f.ops.pop();f.trys.pop();continue}}c=b.call(a,f)}catch(t){c=[6,t],k=0}finally{e=g=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,k,g,n;return n={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};Object.defineProperty(b,"__esModule",{value:!0});var a=e(11),p=e(2);g=function(){function b(a){this.firebase=a;this.cache=
new q(a.options)}b.prototype.getClaims=function(a){return d(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,a.getIdToken()];case 1:return b=c.sent(),[2,p.userBuilder.parseIdToken(b)];case 2:return d=c.sent(),[2,{claims:p.userBuilder.defaultClaims,err:d.message}];case 3:return[2]}})})};b.prototype.onAuthStatChanged=function(a){var b=this;this.firebase.auth().onAuthStateChanged(function(h){return d(b,void 0,void 0,function(){return c(this,
function(b){a(h);return[2]})})})};b.prototype.currentUser=function(){return this.cache};b.prototype.GooglePopup=function(){var b=new a.auth.GoogleAuthProvider;return new r({firebase:this.firebase,provider:b})};return b}();b.AuthDomain=g;var q=function(){function a(a){this.key="firebase:authUser:"+a.apiKey+":[DEFAULT]"}a.prototype.getFromCache=function(){if(!window.localStorage)return{currentUser:null,err:"no local storage in this browser"};var a=localStorage.getItem(this.key);if(!a)return{currentUser:null,
err:"no user exists in local storage; apiKey="+this.key};try{var b=JSON.parse(a);return{currentUser:p.userBuilder.fromFirebase(b),err:""}}catch(h){return{currentUser:null,err:"local storage JSON.parse(text); test="+a+"; error="+h.message}}};return a}(),r=function(){function a(a){this.firebase=a.firebase;this.provider=a.provider}a.prototype.signInWithPopup=function(){return d(this,void 0,void 0,function(){var a,b,d,f;return c(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,
this.firebase.auth().signInWithPopup(this.provider)];case 1:return a=c.sent(),b=a.user,[2,{currentUser:p.userBuilder.fromFirebase(b),err:""}];case 2:return f=d=c.sent(),[2,{currentUser:null,err:f.message}];case 3:return[2]}})})};a.prototype.signOut=function(){return d(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.firebase.auth().signOut()];case 1:return a.sent(),[2,!0];case 2:return a.sent(),[2,!1];case 3:return[2]}})})};return a}()},
function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(1),c=e(7),a=e(5),p=e(6),q=e(9),r=e(0),n=e(37),k=e(8);(function(){return function(){}})();g=function(){function b(a){this.pageNumber=0;this.renderBody=d.bind(a.body);this.view=a.view;this.presenter=a.presenter;this.logger=a.logger}b.prototype.loading=function(a){n.loader.start(this);this.pageNumber++;this.logger.info("loading("+this.pageNumber+")="+a);return this.pageNumber};b.prototype.showArticleList=function(a,b){var f=this;
this.showPage(a,function(){var a=c.ArticleListPresenter.Next(f.presenter,b);f.renderArticleList(a)})};b.prototype.renderArticleList=function(a){document.title=a.title;this.view.renderArticleList(this.renderBody,a);this.presenter=a};b.prototype.showArticle=function(a,b){var c=this;this.showPage(a,function(){var a=k.ArticlePresenter.Next(c.presenter,b);c.renderArticle(a)})};b.prototype.renderArticle=function(a){document.title=a.title;this.view.renderArticle(this.renderBody,a);this.presenter=a};b.prototype.showProfile=
function(b,c){var f=this;this.showPage(b,function(){var b=a.ProfilePresenter.Next(f.presenter,c);f.renderProfile(b)})};b.prototype.renderProfile=function(a){document.title=a.title;this.view.renderProfile(this.renderBody,a);this.presenter=a};b.prototype.showAbout=function(a){var b=this;this.showPage(a,function(){b.renderAbout()})};b.prototype.renderAbout=function(){var a=p.AboutPresenter.Init(this.presenter);this.view.renderAbout(this.renderBody,a);document.title=a.title;this.presenter=a};b.prototype.showPage=
function(a,b){try{a===this.pageNumber?(n.loader.done(this),b(),n.loader.reset(this)):this.logger.info("cancel visit => "+a+" !== "+this.pageNumber)}catch(l){this.showError(a,500,l.message)}};b.prototype.showError=function(a,b,c){this.logger.error("visit error; code="+b+"; error="+c);a===this.pageNumber?(n.loader.done(this),a=q.ErrorPresenter.FromCode(b,this.presenter),this.renderError(a),n.loader.reset(this)):this.logger.info("cancel error visit => "+a+" !== "+this.pageNumber)};b.prototype.renderError=
function(a){this.view.renderError(this.renderBody,a);document.title=a.title;this.presenter=a};b.prototype.render=function(){try{switch(this.presenter.path){case r.path.articles:this.renderArticleList(this.presenter);break;case r.path.articleRegExp:this.renderArticle(this.presenter);break;case r.path.about:this.renderAbout();break;case r.path.profileReqExp:this.renderProfile(this.presenter);break;case r.path.error:this.renderError(this.presenter);break;default:this.logger.error("page.Render() failed; error=path="+
r.path+" not found")}}catch(h){this.logger.error("page.Render() failed; error="+h.message)}};return b}();b.Page=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(3);g=function(){function b(){}b.start=function(a){b.resetNow(a);a.presenter.pageLoader=d.PageLoader.Loading;a.render()};b.reset=function(a){setTimeout(function(c){a.pageNumber===c&&b.resetNow(a)},300,a.pageNumber)};b.done=function(a){setTimeout(function(b){a.pageNumber===b&&(a.presenter.pageLoader===d.PageLoader.Loading&&
(a.presenter.pageLoader=d.PageLoader.Done),a.render())},100,a.pageNumber)};b.resetNow=function(a){a.presenter.pageLoader!==d.PageLoader.Neutral&&(a.presenter.pageLoader=d.PageLoader.Neutral,a.render())};return b}();b.loader=g},function(g,b,e){var d=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(e,g){function h(a){try{k(d.next(a))}catch(E){g(E)}}function f(a){try{k(d["throw"](a))}catch(E){g(E)}}function k(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(h,f)}
k((d=d.apply(a,b||[])).next())})},c=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,h&&(f=h[c[0]&2?"return":c[0]?"throw":"next"])&&!(f=f.call(h,c[1])).done)return f;if(h=0,f)c=[0,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;h=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,
f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))e.label=c[1];else if(6===c[0]&&e.label<f[1])e.label=f[1],f=c;else if(f&&e.label<f[2])e.label=f[2],e.ops.push(c);else{f[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(E){c=[6,E],h=0}finally{g=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},g,h,f,l;return l={next:c(0),"throw":c(1),"return":c(2)},
"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(b,"__esModule",{value:!0});var a=e(2);(function(){return function(){}})();g=function(){function b(a){this.page=a.page;this.domain=a.domain;this.logger=a.logger}b.prototype.rootVisit=function(a){this.root(a,"rootVisit")};b.prototype.rootBack=function(a){this.root(a,"rootBack")};b.prototype.root=function(a,b){return d(this,void 0,void 0,function(){var d,e,g,h,f;return c(this,function(c){switch(c.label){case 0:return d=
this.page.loading(b),e=this.domain.article().queryDraft(a),[4,this.domain.article().all(e)];case 1:g=c.sent();h=g.articleList;if(f=g.domainError)return this.page.showError(d,500,f),[2];this.page.showArticleList(d,h);return[2]}})})};b.prototype.articleVisit=function(a){this.article(a,"articleVisit")};b.prototype.articleBack=function(a){this.article(a,"articleBack")};b.prototype.article=function(a,b){return d(this,void 0,void 0,function(){var d,e,g,h,f;return c(this,function(c){switch(c.label){case 0:return d=
this.page.loading(b),[4,this.domain.article().get(a)];case 1:e=c.sent();g=e.code;h=e.article;if(f=e.error)return this.page.showError(d,g,f),[2];this.page.showArticle(d,h);return[2]}})})};b.prototype.aboutVisit=function(){this.about("aboutVisit")};b.prototype.aboutBack=function(){this.about("aboutBack")};b.prototype.about=function(a){a=this.page.loading(a);this.page.showAbout(a)};b.prototype.profileVisit=function(a){this.profile(a,"profileVisit")};b.prototype.profileBack=function(a){this.profile(a,
"profileBack")};b.prototype.profile=function(a,b){return d(this,void 0,void 0,function(){var d,e,g,h,f;return c(this,function(c){switch(c.label){case 0:return d=this.page.loading(b),[4,this.domain.profile().get({uid:a})];case 1:e=c.sent();g=e.code;h=e.userProfile;if(f=e.err)return this.page.showError(d,g,f),[2];this.page.showProfile(d,h);return[2]}})})};b.prototype.onUserStateChanged=function(b){return d(this,void 0,void 0,function(){var d,e,g,m,h;return c(this,function(c){switch(c.label){case 0:d=
a.userBuilder.signedOut();b?(d=a.userBuilder.fromFirebase(b),this.logger.info("signed in as: "+d.name),this.page.presenter.currentUser=d,this.domain.profile().subscribe(b.uid)):(this.logger.info("signed out"),e=this.page.presenter.currentUser.uid,this.page.presenter.currentUser=d,this.domain.profile().unsubscribe(e));this.page.render();if(!d.signedIn)return[3,2];this.logger.info("getClaims()");return[4,this.domain.auth().getClaims(b)];case 1:g=c.sent(),m=g.claims,(h=g.err)&&this.logger.error(h),this.page.presenter.currentUser=
a.userBuilder.withClaims(this.page.presenter.currentUser,m),c.label=2;case 2:return this.page.render(),this.logger.setUser(this.page.presenter.currentUser),[2]}})})};return b}();b.App=g},function(g,b,e){var d=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(e,g){function k(a){try{f(d.next(a))}catch(x){g(x)}}function h(a){try{f(d["throw"](a))}catch(x){g(x)}}function f(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(k,h)}f((d=d.apply(a,b||[])).next())})},c=this&&
this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,m&&(h=m[c[0]&2?"return":c[0]?"throw":"next"])&&!(h=h.call(m,c[1])).done)return h;if(m=0,h)c=[0,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;m=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(h=e.trys,h=0<h.length&&h[h.length-1])&&(6===c[0]||
2===c[0])){e=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))e.label=c[1];else if(6===c[0]&&e.label<h[1])e.label=h[1],h=c;else if(h&&e.label<h[2])e.label=h[2],e.ops.push(c);else{h[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(x){c=[6,x],m=0}finally{g=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},g,m,h,f;return f={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(f[Symbol.iterator]=
function(){return this}),f};Object.defineProperty(b,"__esModule",{value:!0});g=function(){function a(a){this.logger=a.logger;this.app=a.app;this.auth=a.domain.auth();this.auth.onAuthStatChanged(this.OnAuthStateChanged.bind(this));document.body.addEventListener("click",this)}a.prototype.handleEvent=function(a){try{var b=a.target;if("getAttribute"in b){var c=b.getAttribute("data-action");if(c)this[c+"On"+a.type](a)}}catch(n){this.logger.error(n)}};a.prototype.OnAuthStateChanged=function(a){this.app.onUserStateChanged(a)};
a.prototype.signInWithGoogleOnclick=function(a){return d(this,void 0,void 0,function(){var b,d,e;return c(this,function(c){switch(c.label){case 0:return a.preventDefault(),[4,this.auth.GooglePopup().signInWithPopup()];case 1:return b=c.sent(),d=b.currentUser,e=b.err,null===d&&this.logger.error("signInWithGoogleOnclick failed; error="+e),[2]}})})};a.prototype.signOutOnclick=function(a){return d(this,void 0,void 0,function(){var b;return c(this,function(c){switch(c.label){case 0:return a.preventDefault(),
[4,this.auth.GooglePopup().signOut()];case 1:return(b=c.sent())||this.logger.error("signOutOnclick failed!"),[2]}})})};a.prototype.cleanup=function(){document.body.removeEventListener("click",this)};return a}();b.ActionHandler=g},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});var d=e(41),c=e(46),a=e(0);b.router=function(b){var e=d();e.get("/",function(a){var d=c.url.Query()("page_token");"pushstate"===a.type?b.rootVisit(d):b.rootBack(d)});e.get(a.path.articleRegExp,function(a){var c=
a.params.id;"pushstate"===a.type?b.articleVisit(c):b.articleBack(c)});e.get("/about",function(a){"pushstate"===a.type?b.aboutVisit():b.aboutBack()});e.get(a.path.profileReqExp,function(a){var c=a.params.id;"pushstate"===a.type?b.profileVisit(c):b.profileBack(c)});e.get("*",function(a){window.location.reload(!1)})}},function(g,b,e){(function(b){var c=function(){function a(a,b){"string"!==typeof a&&(a=a.toString(),a=a.slice(1,a.lastIndexOf("/")));return n(a,b)}function c(a,b){for(var c,d={},e=1,h=a.length;e<
h;e++)(c=a[e])&&(d[b[e-1].name]=c);return d}function d(){this.parentNode.removeChild(this)}function g(){this._params={};this._paths={};b.addEventListener("popstate",this,!1);b.addEventListener("pushstate",this,!1)}e(43);var n=e(44),k=g.prototype;k.get=function(b){var c=[],d=a(b,c);c=this._paths[d]||(this._paths[d]={keys:c,cb:[],re:d});d=1;for(var e=arguments.length;d<e;d++)c.cb.push(arguments[d]);return this};k.delete=function(b){var c=a(b,[]);c=this._paths[c];for(var d=1,e=arguments.length;d<e;d++){var g=
arguments[d];g=c?c.cb.lastIndexOf(g):-1;-1<g&&c.cb.splice(g,1)}return this};k.use=function(a,b){a=[].concat(a);for(var c=0,d=a.length;c<d;c++)this.get(a[c],b);return this};k.param=function(a,b){a=[].concat(a);for(var c=0,d=a.length;c<d;c++)this._params[a[c]]=b;return this};k.navigate=function(a,b){switch(!0){case !!b:switch(!0){case !!b.replace:case !!b.replaceState:history.replaceState(history.state,document.title,a)}break;case a===location.pathname+location.search:this.handleEvent({type:"samestate"});
break;default:var c=document;b=c.documentElement;c=c.createElement("a");c.href=a;c.onclick=d;b.insertBefore(c,b.firstChild);c.click()}return this};k.handleEvent=function(a){var b=this._paths,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d],g=e.re.exec(location.pathname);if(g){var k=[],m=[],p=this._params,n={params:c(g,e.keys),type:a.type},q=0,v=e.cb.length;for(d in n.params)p.hasOwnProperty(d)&&m.push(d);(function D(){m.length?(d=m.shift(),p[d](n,D,n.params[d])):function R(){if(q<v){var a=e.cb[q++];
0>k.lastIndexOf(a)?(k.push(a),a(n,R)):R()}}()})();break}}};return function(){return new g}}();g.exports=(b.hyperHTML||{}).app=c}).call(b,e(42))},function(g,b){b=function(){return this}();try{b=b||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(b=window)}g.exports=b},function(g,b){document.addEventListener("click",function(b){var d=b.target;var c=(d.closest||function(a){for(;d&&d.nodeName!==a;)d=d.parentNode;return d}).call(d,"A");if(c&&/^(?:_self)?$/i.test(c.target)&&
!c.hasAttribute("download")&&"external"!==c.getAttribute("rel")){var a=new URL(c.href);c=location;if(a.origin===c.origin){var e=a.pathname+a.search;a=a.hash;var g=!0;b.preventDefault();if(e===c.pathname+c.search)/^#[a-z][a-z0-9.:_-]+$/i.test(a)&&(d=document.querySelector(a+',[name="'+a.slice(1)+'"]'))&&(b.preventDefault=function(){g=!1},setTimeout(function(){g&&d.scrollIntoView(!0)})),history.replaceState(history.state,document.title,e+a);else{var r=new CustomEvent("pushstate");r.state=c.href;setTimeout(function(){dispatchEvent(r);
window.onpushstate&&onpushstate(r)});history.pushState(r.state,document.title,e+a)}}}},!0)},function(g,b,e){function d(a,b){var c=[],d=0,e=0,f="";b=b&&b.delimiter||"/";for(var g;null!=(g=h.exec(a));){var k=g[0],l=g[1],m=g.index;f+=a.slice(e,m);e=m+k.length;if(l)f+=l[1];else{var p=a[e];k=g[2];l=g[3];var n=g[4],r=g[5],y=g[6];m=g[7];f&&(c.push(f),f="");p=null!=k&&null!=p&&p!==k;var z="+"===y||"*"===y;y="?"===y||"*"===y;g=g[2]||b;n=n||r;c.push({name:l||d++,prefix:k||"",delimiter:g,optional:y,repeat:z,
partial:p,asterisk:!!m,pattern:n?n.replace(/([=!:$\/()])/g,"\\$1"):m?".*":"[^"+q(g)+"]+?"})}}e<a.length&&(f+=a.substr(e));f&&c.push(f);return c}function c(a){return encodeURI(a).replace(/[\/?#]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function a(a){return encodeURI(a).replace(/[?#]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function p(b){for(var d=Array(b.length),e=0;e<b.length;e++)"object"===typeof b[e]&&(d[e]=new RegExp("^(?:"+b[e].pattern+")$"));
return function(e,f){var g="";e=e||{};f=(f||{}).pretty?c:encodeURIComponent;for(var h=0;h<b.length;h++){var k=b[h];if("string"===typeof k)g+=k;else{var l=e[k.name];if(null==l)if(k.optional){k.partial&&(g+=k.prefix);continue}else throw new TypeError('Expected "'+k.name+'" to be defined');if(m(l)){if(!k.repeat)throw new TypeError('Expected "'+k.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length)if(k.optional)continue;else throw new TypeError('Expected "'+k.name+'" to not be empty');
for(var p=0;p<l.length;p++){var n=f(l[p]);if(!d[h].test(n))throw new TypeError('Expected all "'+k.name+'" to match "'+k.pattern+'", but received `'+JSON.stringify(n)+"`");g+=(0===p?k.prefix:k.delimiter)+n}}else{n=k.asterisk?a(l):f(l);if(!d[h].test(n))throw new TypeError('Expected "'+k.name+'" to match "'+k.pattern+'", but received "'+n+'"');g+=k.prefix+n}}}return g}}function q(a){return a.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function r(a,b){a.keys=b;return a}function n(a,b,c){m(b)||(c=b||
c,b=[]);c=c||{};for(var d=c.strict,e=!1!==c.end,f="",g=0;g<a.length;g++){var h=a[g];if("string"===typeof h)f+=q(h);else{var k=q(h.prefix),l="(?:"+h.pattern+")";b.push(h);h.repeat&&(l+="(?:"+k+l+")*");l=h.optional?h.partial?k+"("+l+")?":"(?:"+k+"("+l+"))?":k+"("+l+")";f+=l}}a=q(c.delimiter||"/");g=f.slice(-a.length)===a;d||(f=(g?f.slice(0,-a.length):f)+"(?:"+a+"(?=$))?");return r(new RegExp("^"+(e?f+"$":f+(d&&g?"":"(?="+a+"|$)")),c.sensitive?"":"i"),b)}function k(a,b,c){m(b)||(c=b||c,b=[]);c=c||{};
if(a instanceof RegExp){if(c=a.source.match(/\((?!\?)/g))for(var e=0;e<c.length;e++)b.push({name:e,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return r(a,b)}if(m(a)){e=[];for(var f=0;f<a.length;f++)e.push(k(a[f],b,c).source);a=new RegExp("(?:"+e.join("|")+")",c.sensitive?"":"i");return r(a,b)}return n(d(a,c),b,c)}var m=e(45);g.exports=k;g.exports.parse=d;g.exports.compile=function(a,b){return p(d(a,b))};g.exports.tokensToFunction=p;g.exports.tokensToRegExp=
n;var h=/(\\.)|([\/.])?(?:(?:\:(\w+)(?:\(((?:\\.|[^\\()])+)\))?|\(((?:\\.|[^\\()])+)\))([+*?])?|(\*))/g},function(g,b){g.exports=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)}},function(g,b,e){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function b(){}b.Query=function(a){var b=new d,c=function(a){try{return b[a]||""}catch(h){return""}};try{a||(a=window.location.search.substring(1));var e=decodeURIComponent(a);if(!e||""===e)return c;a=0;for(var g=
e.split("&");a<g.length;a++){var k=g[a].split("=");2===k.length&&(b[k[0]]=k[1])}return c}catch(m){return c}};return b}();b.url=g;var d=function(){return function(){}}()}])}]);
