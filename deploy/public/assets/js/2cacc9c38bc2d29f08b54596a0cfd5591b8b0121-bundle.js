/*
 (c) 2017 Andrea Giammarchi @WebReflection, (ISC)  Copyright (c) 2017, Andrea Giammarchi, @WebReflection  (C) 2017 Andrea Giammarchi - @WebReflection - ISC License */
'use strict';(function(M){function A(d){if(f[d])return f[d].exports;var e=f[d]={i:d,l:!1,exports:{}};M[d].call(e.exports,e,e.exports,A);e.l=!0;return e.exports}var f={};A.m=M;A.c=f;A.d=function(d,e,c){A.o(d,e)||Object.defineProperty(d,e,{configurable:!1,enumerable:!0,get:c})};A.n=function(d){var e=d&&d.__esModule?function(){return d["default"]}:function(){return d};A.d(e,"a",e);return e};A.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)};A.p="";return A(A.s=0)})([function(M,A){(function(f){function d(c){if(e[c])return e[c].exports;
var b=e[c]={i:c,l:!1,exports:{}};f[c].call(b.exports,b,b.exports,d);b.l=!0;return b.exports}var e={};d.m=f;d.c=e;d.d=function(c,b,a){d.o(c,b)||Object.defineProperty(c,b,{configurable:!1,enumerable:!0,get:a})};d.n=function(c){var b=c&&c.__esModule?function(){return c["default"]}:function(){return c};d.d(b,"a",b);return b};d.o=function(c,b){return Object.prototype.hasOwnProperty.call(c,b)};d.p="";return d(d.s=19)})([function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(23);d.wire=
function(b,a){return c.wire(b,a)};d.bind=function(b){return c.bind(b)}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=function(){function b(){}b.profile=function(a){return"/profile/"+a};b.nextArticles=function(a){var b={hasMore:!1,nextArticlesPath:"#"};return a&&""!==a?{hasMore:!0,nextArticlesPath:c.articles+"?page_token="+a}:b};b.article=function(a){return"/article/"+a};b.profileReqExp="/profile/:id";b.about="/about";b.articles="/";b.articleRegExp="/article/:id";b.error=
"/error";return b}();d.path=c},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function c(){}c.pageProgressBar="viperfire-progress-bar";c.errHighlight="error-highlight";c.highlight="highlight";c.error="error";c.hide="hide";c.invisible="invisible";c.show="show";c.empty="";c.neutral="";c.loading="loading";c.done="done";c.blink="blink";c.slideInBottom="slide-in-bottom";c.slideOutBottom="slide-out-bottom";return c}();d.css=f},function(f,d,e){Object.defineProperty(d,"__esModule",
{value:!0});f=function(){function a(){}a.ago=function(a){a||(a=Date.now());return new b(a)};return a}();d.time=f;var c=[{name:"second",limit:60,in_seconds:1},{name:"minute",limit:3600,in_seconds:60},{name:"hour",limit:86400,in_seconds:3600},{name:"day",limit:604800,in_seconds:86400},{name:"week",limit:2629743,in_seconds:604800},{name:"month",limit:31556926,in_seconds:2629743},{name:"year",limit:null,in_seconds:31556926}],b=function(){function a(a){this.now=a}a.prototype.time=function(a){var b=(this.now-
a)/1E3;if(0>b)return"future";if(5>b)return"now";for(var r=0;r<c.length;r++)if(a=c[r],!a.limit||b<a.limit)return b=Math.floor(b/a.in_seconds),a=a.name,1<b&&(a+="s"),b+" "+a+" ago"};return a}();d.Ago=b},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(11),b=e(8),a=e(9),h=e(24);f=function(){function q(r){this.isPresenter=!0;this.path=this.title="";this.auth=b.Auth.hide;this.signInForm=h.signInForm;this.snackbar=new a.HiddenSnackbar(1);this.popup=new c.HiddenPopup;this.pageLoader=
r.pageLoader;this.currentUser=r.currentUser;this.ago=r.ago}q.prototype.toJSON=function(){throw"must be implemented in subclass.";};q.prototype.init=function(a){this.title=a.title;this.path=a.path};return q}();d.Presenter=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function c(){}c.openSnackbar="openSnackbar";c.openPopup="openPopup";c.closeAuth="closeAuth";c.closeSnackbar="closeSnackbar";c.closePopup="closePopup";c.signUpOptions="signUpOptions";c.signUpWithEmail=
"signUpWithEmail";c.signInOptions="signInOptions";c.signInWithGoogle="signInWithGoogle";c.signInWithFacebook="signInWithFacebook";c.signInWithTwitter="signInWithTwitter";c.signInWithEmail="signInWithEmail";c.signUp="signUp";c.signIn="signIn";c.signOut="signOut";return c}();d.onClick=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(37);f=function(){function b(){}b.parseIdToken=function(a){try{return{claims:{admin:JSON.parse(c.base64.decodeUnicode(a.split(".")[1]))[b.adminClaim]},
err:null}}catch(h){return{claims:b.defaultClaims,err:h.message}}};b.withClaims=function(a,b){return{signedIn:a.signedIn,uid:a.uid,name:a.name,email:a.email,claims:b}};b.signedOut=function(){return{signedIn:!1,uid:"",name:"",email:"",claims:b.defaultClaims}};b.fromFirebase=function(a){return{signedIn:!0,uid:a.uid,name:a.displayName||"",email:a.email||"",claims:b.defaultClaims}};b.adminClaim="admin";b.defaultClaims={admin:!1};return b}();d.userBuilder=f},function(f,d,e){Object.defineProperty(d,"__esModule",
{value:!0});var c=e(1),b=e(10),a=e(12),h=e(13),q=e(14),r=e(15);(function(a){a[a.Neutral=0]="Neutral";a[a.Loading=1]="Loading";a[a.Done=2]="Done"})(d.PageLoader||(d.PageLoader={}));d.getPresenter=function(){try{var a=JSON.parse(window.__INITIAL_STATE__);return n(a)}catch(m){return{presenter:null,errMessage:m.message}}};var n=function(n){try{switch(n.path){case c.path.articles:return{presenter:h.ArticleListPresenter.Init(n),errMessage:""};case c.path.articleRegExp:return{presenter:q.ArticlePresenter.Init(n),
errMessage:""};case c.path.profileReqExp:return{presenter:b.ProfilePresenter.Init(n),errMessage:""};case c.path.about:return{presenter:a.AboutPresenter.Init(n),errMessage:""};case c.path.error:return{presenter:r.ErrorPresenter.Init(n),errMessage:""};default:return{presenter:null,errMessage:n.path+" not found"}}}catch(m){return{presenter:null,errMessage:m.message}}}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=d.Auth||(d.Auth={});f.hide="hide";f.signUpOptions="signUpOptions";
f.signUpWithEmail="signUpWithEmail";f.signInOptions="signInOptions";f.signInWithEmail="signInWithEmail"},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c;(function(b){b.slideIN="slide-in";b.blink="blink";b.clear="clear";b.slideOut="slide-out";b.hide="hide"})(c=d.state||(d.state={}));f=function(){return function(b){this.state=c.hide;this.text="";this.showAction=!1;this.action=this.actionText="";this.version=b}}();d.HiddenSnackbar=f;f=function(){return function(b){this.version=
0;this.state=c.hide;this.showAction=!1;this.action=this.actionText="";this.text="You are signed in as "+b.email}}();d.SignedInSnackbar=f;f=function(){return function(b){this.version=0;this.state=c.hide;this.showAction=!0;this.text=b.text;this.actionText=b.actionText;this.action=b.action}}();d.ActionSnackbar=f},function(f,d,e){var c=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,c){function h(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(d,"__esModule",{value:!0});var b=e(1),a=e(3);f=function(h){function q(a){var c=h.call(this,a)||this;h.prototype.init.call(c,{title:"Profile",path:b.path.profileReqExp});c.userProfile=a.userProfile;return c}c(q,h);q.Next=function(b,c){return new q({pageLoader:b.pageLoader,currentUser:b.currentUser,ago:a.time.ago(),userProfile:c})};
q.Init=function(b){return new q({pageLoader:b.pageLoader,currentUser:b.currentUser,ago:a.time.ago(),userProfile:b.userProfile})};q.prototype.toJSON=function(){return JSON.stringify(this.toObject())};q.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,userProfile:this.userProfile}};return q}(e(4).Presenter);d.ProfilePresenter=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=
'<button type="btn" data-action="'+e(5).onClick.closePopup+'" tabindex="1">ok</button>';f=function(){return function(){this.show=!1;this.main=this.title="";this.footer=c}}();d.HiddenPopup=f;f=function(){return function(b){this.show=!0;this.footer=c;this.title=b.title;this.main="<p>"+b.main+"</p>"}}();d.ErrorPopup=f},function(f,d,e){var c=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,c){function h(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(d,"__esModule",{value:!0});var b=e(1),a=e(3);f=function(h){function q(a){a=h.call(this,a)||this;h.prototype.init.call(a,{title:"About",path:b.path.about});return a}c(q,h);q.Next=function(b){return new q({pageLoader:b.pageLoader,currentUser:b.currentUser,ago:a.time.ago()})};q.Init=function(b){return new q({pageLoader:b.pageLoader,currentUser:b.currentUser,
ago:a.time.ago()})};q.prototype.toJSON=function(){return JSON.stringify(this.toObject())};q.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser}};return q}(e(4).Presenter);d.AboutPresenter=f},function(f,d,e){var c=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};
return function(b,c){function h(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(d,"__esModule",{value:!0});var b=e(1),a=e(3);f=function(h){function d(a){var c=h.call(this,a)||this;h.prototype.init.call(c,{title:"Articles",path:b.path.articles});c.articleList=a.articleList;return c}c(d,h);d.Next=function(b,c){return new d({pageLoader:b.pageLoader,currentUser:b.currentUser,ago:a.time.ago(),articleList:c})};d.Init=function(b){return new d({pageLoader:b.pageLoader,
currentUser:b.currentUser,ago:a.time.ago(),articleList:b.articleList})};d.prototype.toJSON=function(){return JSON.stringify(this.toObject())};d.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,articleList:this.articleList}};return d}(e(4).Presenter);d.ArticleListPresenter=f},function(f,d,e){var c=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,
b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function h(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(d,"__esModule",{value:!0});var b=e(1),a=e(3);f=function(h){function d(a){var c=h.call(this,a)||this;h.prototype.init.call(c,{title:"Article",path:b.path.articleRegExp});c.article=a.article;return c}c(d,h);d.Next=function(b,c){return new d({pageLoader:b.pageLoader,
currentUser:b.currentUser,ago:a.time.ago(),article:c})};d.Init=function(b){return new d({pageLoader:b.pageLoader,currentUser:b.currentUser,ago:a.time.ago(),article:b.article})};d.prototype.toJSON=function(){return JSON.stringify(this.toObject())};d.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,article:this.article}};return d}(e(4).Presenter);d.ArticlePresenter=f},function(f,d,e){var c=this&&
this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function h(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(d,"__esModule",{value:!0});var b=e(1),a=e(3);f=function(h){function d(a){var c=h.call(this,a)||this;h.prototype.init.call(c,{title:a.title,path:b.path.error});c.message=
a.message;return c}c(d,h);d.FromCode=function(b,c){switch(b){case 404:return new d({pageLoader:c.pageLoader,currentUser:c.currentUser,ago:a.time.ago(),title:"Not Found",message:"Page Not Found"});default:return new d({pageLoader:c.pageLoader,currentUser:c.currentUser,ago:a.time.ago(),title:"Internal Error",message:"Internal Error"})}};d.Init=function(b){return new d({pageLoader:b.pageLoader,currentUser:b.currentUser,ago:a.time.ago(),title:b.title,message:b.message})};d.prototype.toJSON=function(){return JSON.stringify(this.toObject())};
d.prototype.toObject=function(){return{pageLoader:this.pageLoader,title:this.title,isPresenter:this.isPresenter,path:this.path,currentUser:this.currentUser,message:this.message}};return d}(e(4).Presenter);d.ErrorPresenter=f},function(f,d){f.exports=firebase},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function c(){}c.profile=function(b){return c.profiles+"/"+b};c.error=function(b){return c.errors+"/"+b};c.article=function(b){return c.articles+"/"+b};c.profiles="profiles";
c.errors="errors";c.articles="articles";return c}();d.path=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c;(function(b){b[b.OK=200]="OK";b[b.InternalError=500]="InternalError";b[b.NotFound=404]="NotFound"})(c=d.statusCode||(d.statusCode={}));d.domainNotFound=function(b){return{code:c.NotFound,err:b+" Not Found"}};d.domainInternalError=function(b,a){return{code:c.InternalError,err:b+" Internal Error="+a}}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=
e(20),b=e(7),a=e(36),h=e(38),q=e(45);d=e(47);f=e(50);e=e(51);c=c.getClientConfig();a=a.log(c.isOnline);a.info("init app start");var r=document.getElementById("app");if(r){var n=b.getPresenter();b=n.presenter;n=n.errMessage;if(null===b)a.error("getPresenter() failed; error="+n);else{h=new h.Domain({logger:a});var l=h.auth().currentUser().getFromCache();n=l.currentUser;l=l.err;null===n?a.info("auth().currentUser().getFromCache() failed; reason="+l):b.currentUser=n;q=new q.Page({view:c.view,body:r,presenter:b,
logger:a});q.render();d=new d.App({domain:h,page:q,logger:a});new f.ActionHandler({app:d,domain:h,logger:a});e.router(d);a.info("init app done")}}else a.error("could not find id: #app")},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(21),b=e(31),a=e(32),h=e(33),q=e(34),r=e(35);d.getServerConfig=function(){return n()};d.getClientConfig=function(){return n()};var n=function(){var d={header:new h.HeaderView({logo:{name:"Viperfire",url:"/"}}),articleList:new b.ArticleListView,
about:new a.AboutView({hyperLink:{name:"HyperHTML",url:"https://github.com/WebReflection/hyperHTML"},viperLink:{name:"ViperHTML",url:"https://github.com/WebReflection/viperhtml"},links:[{name:"HyperHTML",url:"https://github.com/WebReflection/hyperHTML"},{name:"ViperHTML",url:"https://github.com/WebReflection/viperhtml"}]}),footer:new q.FooterView({links:[{name:"Home",url:"/"},{name:"About",url:"/about"}]})};return{isOnline:r.env.online,view:new c.View(d)}}},function(f,d,e){Object.defineProperty(d,
"__esModule",{value:!0});var c=e(22),b=e(25),a=e(26),h=e(27),q=e(28),r=e(29),n=e(30);f=function(){function d(d){this.auth=new n.AuthView;this.pageLoader=new c.PageLoaderView;this.snackbar=new b.SnackbarView;this.popup=new a.PopupView;this.article=new h.ArticleView;this.profile=new q.ProfileView;this.error=new r.ErrorView;this.header=d.header;this.footer=d.footer;this.articleList=d.articleList;this.about=d.about}d.prototype.renderArticleList=function(a,b){return this.render(a,b,this.articleList.render(b))};
d.prototype.renderArticle=function(a,b){return this.render(a,b,this.article.render(b))};d.prototype.renderProfile=function(a,b){return this.render(a,b,this.profile.render(b))};d.prototype.renderAbout=function(a,b){return this.render(a,b,this.about.render())};d.prototype.renderError=function(a,b){return this.render(a,b,this.error.render(b))};d.prototype.render=function(a,b,c){return d='\n            ;\n            ;\n            ;\n            ;\n            <div class="container">\n                <header>;</header>\n                <main>;</main>\n                <footer>;</footer>\n            </div>\n        '.split(";"),
d.raw='\n            ;\n            ;\n            ;\n            ;\n            <div class="container">\n                <header>;</header>\n                <main>;</main>\n                <footer>;</footer>\n            </div>\n        '.split(";"),a(d,[this.pageLoader.render(b)],[this.popup.render(b)],[this.snackbar.render(b)],[this.auth.render(b)],[this.header.render(b)],[c],[this.footer.render(b)]);var d};return d}();d.View=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});
var c=e(0),b=e(7),a=e(2);f=function(){function d(){this.html=c.wire(this)}d.prototype.render=function(c){var d=a.css.pageProgressBar,h="background-progress-bar";c.pageLoader===b.PageLoader.Loading&&(h=h+" "+a.css.loading,d=d+" "+a.css.loading);c.pageLoader===b.PageLoader.Done&&(h=h+" "+a.css.done,d=d+" "+a.css.done);return e=['\n            <div class="','"></div>\n            <div class="','">\n            </div>\n        '],e.raw=['\n            <div class="','"></div>\n            <div class="',
'">\n            </div>\n        '],this.html(e,h,d);var e};return d}();d.PageLoaderView=f},function(f,d){d=function(d,c){function b(b){return 2>arguments.length?null==b?G("html"):"string"==typeof b?h(null,b):"raw"in b?G("html")(b):"nodeType"in b?a(b):fa(b,"html"):("raw"in b?G("html"):h).apply(null,arguments)}function a(a){return n.bind(a)}function h(a,b){return 1>arguments.length?G("html"):null==a?G(b||"html"):fa(a,b||"html")}function e(){}function f(a,b){return this.node=a,this.childNodes=b,c.aura(this,
b)}function n(a){var b=V.get(this);return b&&b.template===N(a)?W.apply(b.updates,arguments):ya.apply(this,arguments),this}function l(b,a,c){var d,h,k,g=b.ownerElement,p="data"===c,m=!p&&/^on/.test(c),e=p||z(g,c)&&!za.test(c),x=m?c.slice(2):"",l=e||m,f=e&&(p||c in g);return(m||f)&&(a.push(g,c),m&&(x===K||x===X?ha.add(g):c.toLowerCase()in g&&(x=x.toLowerCase()))),e&&(f||(k=O.get(g),k||(k={_:Object.create(null),$:function(){O.delete(g);for(var b in this._)this._[b].$()}},O.set(g,k)),k._[c]={_:null,$:function(){f=
!0;h(this._)}}),h=function(a){f?d!==a&&(d=a,g[c]!==a&&(null==a?(g[c]=null,g.removeAttribute(c)):g[c]=a)):(b.value=a,k._[c]._=a,c in g&&k.$())}),m?function(a){d!==a&&(d&&g.removeEventListener(x,d,!1),d=a,a&&g.addEventListener(x,a,!1))}:e?h:function(a){d!==a&&(d=a,b.value!==a&&(null==a?l||(l=!0,g.removeAttributeNode(b)):(b.value=a,l&&(l=!1,g.setAttributeNode(b)))))}}function m(a){var b;return function(c){c!==b&&(b=c,a.textContent=c)}}function k(a,b,c){var d;return function B(g){switch(typeof g){case "string":case "number":case "boolean":var h=
b.length;1===h&&b[0].nodeType===Y?d!==g&&(d=g,b[0].textContent=g):(d=g,h?c.splice(0,h,a.ownerDocument.createTextNode(g)):b[0]=a.parentNode.insertBefore(a.ownerDocument.createTextNode(g),a));break;case "function":B(g(a.parentNode,b,0));break;case "object":case "undefined":if(null==g){d=g;B("");break}g instanceof e&&(g=g.render());default:if(d=g,ia(g))if(h=g.length,0===h)c.splice(0);else switch(typeof g[0]){case "string":case "number":case "boolean":B({html:g});break;case "function":for(var k=a.parentNode,
p=0;p<h;p++)g[p]=g[p](k,b,p);B(g.concat.apply([],g));break;case "object":ia(g[0])&&(g=g.concat.apply([],g));h=g[0];if(null!=h&&"then"in h){Promise.all(g).then(B);break}p=0;for(h=g.length;p<h;p++)g[p]instanceof e&&(g[p]=g[p].render());default:D(c,g)}else"ELEMENT_NODE"in g?D(c,g.nodeType===ja?E.call(g.childNodes):[g]):null!=g&&"then"in g?g.then(B):"placeholder"in g?(B(g.placeholder),"text"in g?Promise.resolve(g.text).then(String).then(B):"any"in g?Promise.resolve(g.any).then(B):"html"in g?Promise.resolve(g.html).then(u).then(B):
Promise.resolve(v(g,B)).then(B)):"text"in g?B(String(g.text)):"any"in g?B(g.any):"html"in g?(g=[].concat(g.html).join(""),c.splice(0),g=(T in a?ka:H)(a,g.replace(la,ma)),b.push.apply(b,g.childNodes),a.parentNode.insertBefore(g,a)):B("length"in g?E.call(g):v(g,B))}}}function g(a,b,c){for(var d,h=a.childNodes,k=h.length,p=0;p<k;p++)switch(d=h[p],d.nodeType){case I:for(var m,e=void 0,l=void 0,x=void 0,f=d,n=b,u=c,q=Object.create(null),t=f.attributes,H=0,w=t.length;H<w;H++)m=t[H],m.value===F&&(x=m.name,
x in q?(f.removeAttributeNode(m),q[x].value="",f.setAttributeNode(q[x]),w--,H--):(l=u.shift().replace(/^(?:|[\S\s]*?\s)(\S+?)=['"]?$/,"$1"),e=f.attributes,q[x]=e[l]||e[l.toLowerCase()],n.push(y("attr",q[x],l))));g(d,b,c);break;case na:d.textContent===F&&(c.shift(),b.push(y("any",d)));break;case Y:Aa.test(a.nodeName)&&oa.call(d.textContent)===U&&(c.shift(),b.push(y("text",a)))}}function p(a){return Ba[a]}function u(a){return{html:a}}function H(a,b){var c,g=a.ownerDocument;a=g.createElement(/<([a-z][a-z0-9]*(?:-[a-z0-9]+)+)[\s\S]*?>[\s\S]*?<\/\1>/i.test(b)?
"div":"template");var d="content"in a,h=!1;(d||(c=g.createDocumentFragment(),h=/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(b)),h)?(g=RegExp.$1,a.innerHTML="<table>"+b+"</table>",P(c,E.call(a.querySelectorAll(g)))):(a.innerHTML=b,d?c=a.content:P(c,E.call(a.childNodes)));return c}function ka(a,b){var c=a.ownerDocument;a=c.createDocumentFragment();Q||Z?(c=c.createElement("div"),c.innerHTML='<svg xmlns="'+aa+'">'+b+"</svg>",P(a,E.call(c.firstChild.childNodes))):(c=c.createElementNS(aa,
"svg"),c.innerHTML=b,P(a,E.call(c.childNodes)));return a}function w(a,b){for(var c,g,d=b===K,h=0,k=a.length;h<k;h++)g=a[h],g.nodeType===I&&(c=t(g,d,b,c))}function t(a,b,c,g){if(ha.has(a))a.dispatchEvent(g||(g=new pa(c)));else if(b&&O.has(a))O.get(a).$();else{a=L(a);for(var d=0,h=a.length;d<h;d++)g=t(a[d],b,c,g)}return g}function z(a,c){var g=!(T in a);if(g&&/-/.test(a.nodeName)){var d=b.document;(d=(d=d.customElements||d.defaultView.customElements)&&d.get(a.nodeName.toLowerCase()))&&(a=d.prototype)}return g&&
c in a}function v(a,b){for(var c,g=0,d=ba.length;g<d;g++)if(c=ba[g],a.hasOwnProperty(c))return ca[c](a[c],b)}function C(a,b){var c="_"+a+"$";return{get:function(){return this[c]||(this[a]=b.call(this,a))},set:function(a){Ca(this,c,{configurable:!0,value:a})}}}function D(a,g){var d=0,h=a.length;if(g.length!==h)c(a,g,b.MAX_LIST_SIZE);else for(;d<h--;d++)if(a[h]!==g[h]||a[d]!==g[d])return void c(a,g,b.MAX_LIST_SIZE)}function A(a){for(var b=0,c=a.length;b<c;b++)a[b++].removeAttribute(a[b])}function R(a,
b,c,g){switch(a.type){case "any":var d=k(b,g,new f(b,g));break;case "attr":d=l(b,c,a.name);break;case "text":d=m(b)}return d}function y(a,b,c){var g=[];switch(b.nodeType){case I:case ja:var d=b;break;case na:d=b.parentNode;g.unshift("childNodes",g.indexOf.call(d.childNodes,b));break;default:d=b.ownerElement,g.unshift("attributes",b.name)}for(b=d;d=d.parentNode;b=d)g.unshift("children",g.indexOf.call(L(d),b));return{type:a,path:g,name:c}}function M(a){var b="_"+a.join(U);return qa[b]||(qa[b]=a)}function ra(a,
b){var c=b.previousSibling;c&&c.nodeType===Y&&(a.removeChild(c),ra(a,b))}function W(){for(var a=1,b=arguments.length;a<b;a++)this[a-1](arguments[a])}function ya(a){a=N(a);var b;if(!(b=sa.get(a))){b=a;var c=[];var d=b.join(U);d=(T in this?ka:H)(this,d.replace(la,ma));var h={fragment:d,paths:c};b=(g(d,c,b.slice()),sa.set(b,h),h)}c=b;if(da){b=ta(c.fragment);c=c.paths;h=[];for(var k=[],p=0,m=c.length;p<m;p++)d=c[p],h[p]=R(d,ea(b,d.path),k,[]);c=(A(k),h);V.set(this,{template:a,updates:c});W.apply(c,arguments);
this.textContent="";this.appendChild(b)}else{b=c.fragment;c=c.paths;h=[];k=[];p=0;for(m=c.length;p<m;p++){d=[];var e=c[p];var l=p,f=e,n=this,q=b,u=d,t=n,w=n.ownerDocument;e=e.path;for(var r=ea(q,e),x=0,z=e.length;x<z;x++)switch(e[x++]){case "attributes":t=r.name;n.hasAttribute(t)||n.setAttribute(t,"");t=n.attributes[t];break;case "childNodes":var v=L(n),D=L(r.parentNode),C=(t=Da(r))?e.indexOf.call(D,t)+1:-1,y=(t=ua(r))?e.indexOf.call(D,t):-1;switch(t=w.createComment(F),!0){case 0>y:y=v.length;break;
case 0>C:C=0;default:y=-(D.length-y)}u.push.apply(u,E.call(v,C,y));u.length?(v=n,y=t,(D=ua(u[u.length-1]))?v.insertBefore(y,D):v.appendChild(y)):(D=n,C=t,(v=E.call(v,y)[0])?D.insertBefore(C,v):D.appendChild(C));0===u.length&&ra(n,t);break;default:n=t=L(n)[e[x]]||n.appendChild(n.ownerDocument.createElement(ea(q,e.slice(0,x+1)).nodeName))}h[l]=R(f,t,k,d)}c=(A(k),h);V.set(this,{template:a,updates:c});W.apply(c,arguments)}}function G(c){function g(b){m=b.createDocumentFragment();k="svg"===c?b.createElementNS(aa,
"svg"):m;e=a(k)}function d(){if(l){l=!1;"svg"===c&&P(m,E.call(k.childNodes));for(var a,b=[],g=m.childNodes,d=0,h=g.length;d<h;d++)a=g[d],a.nodeType!==I&&0===oa.call(a.textContent).length||b.push(a);p=1===b.length?b[0]:b}return p}var h,p,k,m,e,l,f;return"adopt"===c?function(a){var p=arguments;return a=N(a),f!==a&&(l=!0,f=a,h=function(a,h,f){return l&&(f<h.length?(k=h[f],m={ownerDocument:k.ownerDocument,childNodes:[k],children:[k]},e=b.adopt(m)):(T in a&&(c="svg"),g(a.ownerDocument))),e.apply(null,
p),d()}),h}:function(a){return a=N(a),f!==a&&(l=!0,f=a,g(b.document)),e.apply(null,arguments),d()}}function fa(a,b){var c=va.get(a),g=b.indexOf(":"),d=b;return-1<g&&(d=b.slice(g+1),b=b.slice(0,g)||"html"),c||(c={},va.set(a,c)),c[d]||(c[d]=G(b))}b.document=d;b.hyper=b;b.adopt=function(a){return function(){return da=!1,n.apply(a,arguments),da=!0,a}};b.bind=a;b.define=function(a,b){a in ca||ba.push(a);ca[a]=b};b.escape=function(a){return a.replace(/[&<>'"]/g,p)};b.wire=h;b.Component=e;Object.defineProperties(e.prototype,
{handleEvent:{value:function(a){var b=a.currentTarget;this["getAttribute"in b&&b.getAttribute("data-call")||"on"+a.type](a)}},html:C("html",G),svg:C("svg",G),state:C("state",function(){return this.defaultState}),defaultState:{get:function(){return{}}},setState:{value:function(a){var b=this.state;a="function"==typeof a?a.call(this,b):a;for(var c in a)b[c]=a[c];this.render()}}});var I=1,Y=3,na=8,ja=11,T="ownerSVGElement",aa="http://www.w3.org/2000/svg",za=/^style$/i,Aa=/^style|textarea$/i,F="_hyper: "+
(Math.random()*new Date|0)+";",U="\x3c!--"+F+"--\x3e";f.prototype.splice=function(a){var b=this.node;for(var c=this.childNodes,g=c[a+(arguments[1]||0)]||b,d=c.splice.apply(c,arguments),h=b.parentNode,k=0,p=d.length;k<p;k++)b=d[k],0>c.indexOf(b)&&h.removeChild(b);if(k=2,p=arguments.length,k<p){if(1==p-k)b=arguments[k];else for(b=h.ownerDocument.createDocumentFragment();k<p;)b.appendChild(arguments[k++]);h.insertBefore(b,g)}return d};var J=d.createDocumentFragment(),Ea="object"==typeof navigator&&/Firefox\/(\d+)/.test(navigator.userAgent)&&
55>parseFloat(RegExp.$1),Q=function(){var a=d.createElement("p");return a.innerHTML='<i data-i="" class=""></i>',/class/i.test(a.firstChild.attributes[0].name)}(),Z=!("children"in J),N=function(a){return(N=a.propertyIsEnumerable("raw")||Ea?M:function(a){return a})(a)},E=[].slice,Ba={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},K="connected",X="dis"+K;try{new Event(K);var pa=Event}catch(x){pa=function(a){var c=b.document.createEvent("Event");return c.initEvent(a,!1,!1),c}}try{(new MutationObserver(function(a){for(var b,
c=0,g=a.length;c<g;c++)b=a[c],w(b.removedNodes,X),w(b.addedNodes,K)})).observe(d,{subtree:!0,childList:!0})}catch(x){d.addEventListener("DOMNodeInserted",function(a){w([a.target],K)},!1),d.addEventListener("DOMNodeRemoved",function(a){w([a.target],X)},!1)}var S=typeof WeakMap==typeof S?function(){return{delete:function(a){delete a[F]},get:function(a){return a[F]},has:function(a){return F in a},set:function(a,b){Object.defineProperty(a,F,{configurable:!0,value:b})}}}:WeakMap,wa=typeof WeakSet==typeof wa?
function(){var a=new S;return{add:function(b){a.set(b,!0)},has:function(b){return!0===a.get(b)}}}:WeakSet,xa=typeof Map==typeof xa?function(){var a=[],b=[];return{get:function(c){return b[a.indexOf(c)]},set:function(c,g){b[a.push(c)-1]=g}}}:Map,ia=Array.isArray||function(){var a={}.toString,b=a.call([]);return function(c){return a.call(c)===b}}(),oa="_hyper: ".trim||function(){return this.replace(/^\s+|\s+$/g,"")},Ca=Object.defineProperty,ca={},ba=[],qa={},P="append"in J?function(a,b){a.append.apply(a,
b)}:function(a,b){for(var c=0,g=b.length;c<g;c++)a.appendChild(b[c])},L=Z||Q?function(a){for(var b=[],c=a.childNodes,g=0,d=0,h=c.length;d<h;d++)a=c[d],a.nodeType===I&&(b[g++]=a);return b}:function(a){return a.children},ea=Q||Z?function(a,b){for(var c,g=0,d=b.length;g<d;g++)switch(c=b[g++]){case "children":a=L(a)[b[g]];break;default:a=a[c][b[g]]}return a}:function(a,b){for(var c=0,g=b.length;c<g;c++)a=a[b[c++]][b[c]];return a},la=/(<[a-z]+[a-z0-9:_-]*)((?:[^\S]+[^ \f\n\r\t\/>"'=]+(?:=(?:'.*?'|".*?"|<.+?>|\S+))?)+)([^\S]*\/?>)/gi,
Fa=new RegExp("([^\\S]+[^ \\f\\n\\r\\t\\/>\"'=]+=)(['\"]?)"+U+"\\2","gi"),ma=function(a,b,c,g){return b+c.replace(Fa,Ga)+g},Ga=function(a,b,c){return b+(c||'"')+F+(c||'"')},ha=new wa,V=new S,va=new S,sa=new xa,O=new S,da=!0,ta=function(){return J.appendChild(J.ownerDocument.createTextNode("g")),J.appendChild(J.ownerDocument.createTextNode("")),1===J.cloneNode(!0).childNodes.length?function(a){var b=a.cloneNode();a=a.childNodes||[];for(var c=0,g=a.length;c<g;c++)b.appendChild(ta(a[c]));return b}:function(a){return a.cloneNode(!0)}}(),
ua=Q?function(a){for(;a=a.nextSibling;)if(a.nodeType===I)return a}:function(a){return a.nextElementSibling},Da=Q?function(a){for(;a=a.previousSibling;)if(a.nodeType===I)return a}:function(a){return a.previousElementSibling};return b.MAX_LIST_SIZE=1E3,b}(document,function(){function d(d,e,l){var m=d.length,k=e.length;l=(l||1/0)<Math.sqrt((m||1)*(k||1));if(1>m||l)d=void((k||l)&&d.splice.apply(d,[0,m].concat(e)));else if(1>k)d=void d.splice(0);else{var g=d.length+1,p=e.length+1,u=0,n=0,q=0,w=0;m=new f(g*
p);for(m[0]=0;++u<p;)m[u]=u;for(;++n<g;){var t=u=0;var r=w;w=n*p;for(m[w+u]=n;++u<p;){k=m[r+u]+1;l=m[w+t]+1;var v=m[r+t]+(d[q]==e[t]?0:1);m[w+u]=k<l?k<v?k:v:l<v?l:v;++t}q=n}k=[];g=e.length+1;p=d.length+1-1;for(u=g-1;u&&p;)n=p*g+u,t=n-g,l=m[n],v=m[t],n=m[n-1],t=m[t-1],t<=n&&t<=v&&t<=l?(u--,p--,t<l&&c(k,h,u,p,1,[e[u]])):n<=v&&n<=l?(u--,c(k,a,u,p,0,[e[u]])):(p--,c(k,b,u,p,1,[]));for(;u--;)c(k,a,u,p,0,[e[u]]);for(;p--;)c(k,b,u,p,1,[]);v=0;g=1;if(p=k.length){for(l=m=k[0];g<p;)e=k[g++],m.type===e.type&&
1>=e.x-m.x&&1>=e.y-m.y?(l.count+=e.count,l.items=l.items.concat(e.items)):(d.splice.apply(d,[l.y+v,l.count].concat(l.items)),v+=l.type===a?l.items.length:l.type===b?-l.count:0,l=e),m=e;d.splice.apply(d,[l.y+v,l.count].concat(l.items))}d=void 0}return d}function c(a,b,c,d,h,g){a.unshift({type:b,x:c,y:d,count:h,items:g})}var b="del",a="ins",h="sub",f=/^u/.test(typeof Int32Array)?Array:Int32Array;return d.aura=function(a,b){var c=b.splice;return b.splice=function k(){b.splice=c;var g=a.splice.apply(a,
arguments);return b.splice=k,g},b},d}());try{f.exports=d}catch(e){}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});d.signInForm={disableSubmit:!1,email:"",emailError:!1,password:"",passwordError:!1}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0),b=e(2),a=e(9),h=e(5);f=function(){function d(){this.html=c.wire(this)}d.prototype.render=function(c){c=c.snackbar;var d="snackbar",e="snackbar-container";switch(c.state){case a.state.hide:d=d+" "+b.css.hide;
break;case a.state.blink:e=e+" "+b.css.blink;break;case a.state.slideIN:e=e+" "+b.css.slideInBottom;break;case a.state.slideOut:e=e+" "+b.css.slideOutBottom}var m="snackbar-action "+b.css.hide;c.showAction&&(m="snackbar-action");return k='\n            <div class=";">\n                <div class=";">\n                    <span class="snackbar-message">;</span>\n                    <span class=";">\n                        <a href="#">;</a>\n                     </span>\n                    <span class="snackbar-close">\n                        <svg xmlns="http://www.w3.org/2000/svg" \n                            fill="#000000" \n                            data-action=";"\n                            height="24" \n                            viewBox="0 0 24 24" \n                            width="24">\n                            <path class="clear" \n                                  data-action=";"\n                                  d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n                            <path d="M0 0h24v24H0z" fill="none"/>\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        '.split(";"),
k.raw='\n            <div class=";">\n                <div class=";">\n                    <span class="snackbar-message">;</span>\n                    <span class=";">\n                        <a href="#">;</a>\n                     </span>\n                    <span class="snackbar-close">\n                        <svg xmlns="http://www.w3.org/2000/svg" \n                            fill="#000000" \n                            data-action=";"\n                            height="24" \n                            viewBox="0 0 24 24" \n                            width="24">\n                            <path class="clear" \n                                  data-action=";"\n                                  d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n                            <path d="M0 0h24v24H0z" fill="none"/>\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        '.split(";"),
this.html(k,d,e,c.text,m,c.actionText,h.onClick.closeSnackbar,h.onClick.closeSnackbar);var k};return d}();d.SnackbarView=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0),b=e(2);f=function(){function a(){this.html=c.wire(this)}a.prototype.render=function(a){var c="modal "+b.css.hide;a=a.popup;a.show&&(c="modal");return d=['\n            <div class="','">\n                <div class="modal-overlay"></div>\n                <div class="modal-container">\n                    <div class="modal-center">\n                        <h3 class="modal-header">',
'</h3>\n                        <div class="modal-separator"></div>\n                        <div class="modal-main">','</div>\n                        <div class="modal-separator"></div>\n                        <div class="modal-footer">',"</div>\n                    </div>\n                </div>\n            </div>\n        "],d.raw=['\n            <div class="','">\n                <div class="modal-overlay"></div>\n                <div class="modal-container">\n                    <div class="modal-center">\n                        <h3 class="modal-header">',
'</h3>\n                        <div class="modal-separator"></div>\n                        <div class="modal-main">','</div>\n                        <div class="modal-separator"></div>\n                        <div class="modal-footer">',"</div>\n                    </div>\n                </div>\n            </div>\n        "],this.html(d,c,a.title,[a.main],[a.footer]);var d};return a}();d.PopupView=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0);f=function(){function b(){this.html=
c.wire(this)}b.prototype.render=function(a){var b=a.ago;return c=['\n            <div class="article">\n                <h1>',"</h1>\n                <p>","</p>\n                <div>Created: ","</div>\n                <div>Published: ","</div>\n            </div>\n        "],c.raw=['\n            <div class="article">\n                <h1>',"</h1>\n                <p>","</p>\n                <div>Created: ","</div>\n                <div>Published: ","</div>\n            </div>\n        "],this.html(c,
a.article.title,a.article.bodyText,b.time(a.article.createTime),b.time(a.article.publishTime));var c};return b}();d.ArticleView=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0);f=function(){function b(){this.html=c.wire(this)}b.prototype.render=function(a){return b=["\n            <h2>","</h2>\n            <p>Admin? ","</p>\n        "],b.raw=["\n            <h2>","</h2>\n            <p>Admin? ","</p>\n        "],this.html(b,a.userProfile.name,a.userProfile.admin);var b};
return b}();d.ProfileView=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0);f=function(){function b(){this.html=c.wire(this)}b.prototype.render=function(a){return b=['\n            <div class="page-error">\n                <p>',"</p>\n            </div>\n        "],b.raw=['\n            <div class="page-error">\n                <p>',"</p>\n            </div>\n        "],this.html(b,a.message);var b};return b}();d.ErrorView=f},function(f,d,e){Object.defineProperty(d,"__esModule",
{value:!0});var c=e(0),b=e(8),a=e(2),h=e(5);f=function(){function d(){this.html=c.wire(this);this.signUpOptions=new q;this.signUpWithEmail=new r;this.signInWithEmail=new l;this.signInOptions=new n}d.prototype.render=function(c){var d="auth-overlay",p="auth-container";c.auth===b.Auth.hide&&(d=d+" "+a.css.hide,p=p+" "+a.css.hide);return k='\n            <div class=";"></div>\n            <div class=";">\n                <div class="auth-modal">\n                    <div class="auth-modal-close">\n                        <svg xmlns="http://www.w3.org/2000/svg" \n                            fill="#000000" \n                            data-action=";"\n                            height="24" \n                            viewBox="0 0 24 24" \n                            width="24">\n                            <path\n                                  data-action=";"\n                                  d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n                            <path d="M0 0h24v24H0z" fill="none"/>\n                        </svg>\n                    </div>\n                    ;\n                    ;\n                    ;\n                    ;\n                </div>\n            </div>\n        '.split(";"),
k.raw='\n            <div class=";"></div>\n            <div class=";">\n                <div class="auth-modal">\n                    <div class="auth-modal-close">\n                        <svg xmlns="http://www.w3.org/2000/svg" \n                            fill="#000000" \n                            data-action=";"\n                            height="24" \n                            viewBox="0 0 24 24" \n                            width="24">\n                            <path\n                                  data-action=";"\n                                  d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n                            <path d="M0 0h24v24H0z" fill="none"/>\n                        </svg>\n                    </div>\n                    ;\n                    ;\n                    ;\n                    ;\n                </div>\n            </div>\n        '.split(";"),
this.html(k,d,p,h.onClick.closeAuth,h.onClick.closeAuth,this.signUpOptions.render(b.Auth.signUpOptions===c.auth),this.signUpWithEmail.render(b.Auth.signUpWithEmail===c.auth),this.signInOptions.render(b.Auth.signInOptions===c.auth),this.signInWithEmail.render(b.Auth.signInWithEmail===c.auth,c.signInForm));var k};return d}();d.AuthView=f;var q=function(){function b(){this.html=c.wire(this)}b.prototype.render=function(b){var c=a.css.hide;b&&(c="auth-content");return d='\n            <div class=";">\n                <h2>Join Viperfire</h2>\n                <button data-action=";">\n                    Sign up with Google\n                </button>\n                <button data-action=";">\n                    Sign up with Facebook\n                </button>\n                <button data-action=";">\n                    Sign up with Twitter\n                </button>\n                <button data-action=";">\n                    Sign up with Email\n                </button>\n                <p>\n                    Already have an account? \n                    <a href="#" data-action=";">Sign in</a>\n                </p>\n                 <a href="/terms-of-service" class="auth-tos">Terms of Service</a>\n            </div>\n        '.split(";"),
d.raw='\n            <div class=";">\n                <h2>Join Viperfire</h2>\n                <button data-action=";">\n                    Sign up with Google\n                </button>\n                <button data-action=";">\n                    Sign up with Facebook\n                </button>\n                <button data-action=";">\n                    Sign up with Twitter\n                </button>\n                <button data-action=";">\n                    Sign up with Email\n                </button>\n                <p>\n                    Already have an account? \n                    <a href="#" data-action=";">Sign in</a>\n                </p>\n                 <a href="/terms-of-service" class="auth-tos">Terms of Service</a>\n            </div>\n        '.split(";"),
this.html(d,c,h.onClick.signInWithGoogle,h.onClick.signInWithFacebook,h.onClick.signInWithTwitter,h.onClick.signUpWithEmail,h.onClick.signInOptions);var d};return b}(),r=function(){function b(){this.html=c.wire(this)}b.prototype.render=function(b){var c=a.css.hide;b&&(c="auth-content");return d=['\n            <div class="','">\n                <h2>Sign up with email</h2>\n                <div>Add form ...\n                    <button>Create Account</button>\n                </div>\n                <a href="#" data-action="',
'">All sign up options</a>\n                <p> By creating an account, you accept Viperfire\'s \n                    <a href="/terms-of-service">Terms of Service</a>.\n                </p>\n            </div>\n        '],d.raw=['\n            <div class="','">\n                <h2>Sign up with email</h2>\n                <div>Add form ...\n                    <button>Create Account</button>\n                </div>\n                <a href="#" data-action="','">All sign up options</a>\n                <p> By creating an account, you accept Viperfire\'s \n                    <a href="/terms-of-service">Terms of Service</a>.\n                </p>\n            </div>\n        '],
this.html(d,c,h.onClick.signUpOptions);var d};return b}(),n=function(){function b(){this.html=c.wire(this)}b.prototype.render=function(b){var c=a.css.hide;b&&(c="auth-content");return d='\n            <div class=";">\n                <h2>Welcome back</h2>\n                <button\n                    data-action=";">\n                    Sign in with Google\n                </button>\n                <button data-action=";">\n                    Sign in with Facebook\n                </button>\n                <button data-action=";">\n                    Sign in with Twitter\n                </button>\n                <button data-action=";">\n                    Sign in with Email\n                </button>\n                <p>\n                    No account?\n                    <a href="#" data-action=";">Create one</a>\n                </p>\n                <a href="/terms-of-service" class="auth-tos">Terms of Service</a>\n            </div>\n        '.split(";"),
d.raw='\n            <div class=";">\n                <h2>Welcome back</h2>\n                <button\n                    data-action=";">\n                    Sign in with Google\n                </button>\n                <button data-action=";">\n                    Sign in with Facebook\n                </button>\n                <button data-action=";">\n                    Sign in with Twitter\n                </button>\n                <button data-action=";">\n                    Sign in with Email\n                </button>\n                <p>\n                    No account?\n                    <a href="#" data-action=";">Create one</a>\n                </p>\n                <a href="/terms-of-service" class="auth-tos">Terms of Service</a>\n            </div>\n        '.split(";"),
this.html(d,c,h.onClick.signInWithGoogle,h.onClick.signInWithFacebook,h.onClick.signInWithTwitter,h.onClick.signInWithEmail,h.onClick.signUpOptions);var d};return b}(),l=function(){function b(){this.html=c.wire(this)}b.prototype.render=function(b,c){var d=a.css.hide;b&&(d="auth-content");b=a.css.invisible;c.emailError&&(b=a.css.error);var g=a.css.invisible;c.passwordError&&(g=a.css.error);return k='\n            <div class=";">\n                <h2>Sign in with email</h2>\n                <form action="#" data-action="signInForm" class="sign-in-form" novalidate>\n                    <div class="form-field">\n                        <input \n                            required\n                            autofocus\n                            maxlength="350"\n                            minlength="4"\n                            placeholder="Email"\n                            name="email" \n                            type="email"/>\n                        <span class=";">we need your email</span>\n                    </div>\n                    <div class="form-field">\n                        <input \n                            placeholder="Password"\n                            required \n                            maxlength="60"\n                            minlength="4"\n                            name="password"\n                            type="password"/>\n                        <span class=";">we need your password (at least 4 chars)</span>\n                    </div>\n                    \n                    <button disabled=";">Sign in</button>\n                </form>\n                <p>\n                    <a href="#" data-action=";">\n                       Back to sign in options\n                    </a>\n                </p>\n                <a href="/terms-of-service" class="auth-tos">Terms of Service</a>\n            </div>\n        '.split(";"),
k.raw='\n            <div class=";">\n                <h2>Sign in with email</h2>\n                <form action="#" data-action="signInForm" class="sign-in-form" novalidate>\n                    <div class="form-field">\n                        <input \n                            required\n                            autofocus\n                            maxlength="350"\n                            minlength="4"\n                            placeholder="Email"\n                            name="email" \n                            type="email"/>\n                        <span class=";">we need your email</span>\n                    </div>\n                    <div class="form-field">\n                        <input \n                            placeholder="Password"\n                            required \n                            maxlength="60"\n                            minlength="4"\n                            name="password"\n                            type="password"/>\n                        <span class=";">we need your password (at least 4 chars)</span>\n                    </div>\n                    \n                    <button disabled=";">Sign in</button>\n                </form>\n                <p>\n                    <a href="#" data-action=";">\n                       Back to sign in options\n                    </a>\n                </p>\n                <a href="/terms-of-service" class="auth-tos">Terms of Service</a>\n            </div>\n        '.split(";"),
this.html(k,d,b,g,c.disableSubmit,h.onClick.signInOptions);var k};return b}()},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0),b=e(1),a=e(2);f=function(){function d(){this.html=c.wire(this)}d.prototype.render=function(d){var h=0<d.articleList.length,e=b.path.nextArticles(d.articleList.pageToken),f=e.nextArticlesPath,m=a.css.hide;e.hasMore&&(m=a.css.show);var k=d.ago;return g=['\n            <div class="articles">\n                ',"\n            </div>"],g.raw=['\n            <div class="articles">\n                ',
"\n            </div>"],this.html(g,h?(p=["<ul>\n                            ",'\n                        </ul>\n                        <a href="','" class="','">More</a>'],p.raw=["<ul>\n                            ",'\n                        </ul>\n                        <a href="','" class="','">More</a>'],c.wire(this,":article-list")(p,d.articleList.articles.map(function(a){return d=['\n                                <li>\n                                    <a href="','">',"</a>\n                                    <span>",
"</span>\n                                </li>"],d.raw=['\n                                <li>\n                                    <a href="','">',"</a>\n                                    <span>","</span>\n                                </li>"],c.wire(a)(d,b.path.article(a.id),a.id,k.time(a.createTime));var d}),f,m)):(u=["<p>Found no articles</p>"],u.raw=["<p>Found no articles</p>"],c.wire(this,":no-articles")(u)));var g,p,u};return d}();d.ArticleListView=f},function(f,d,e){Object.defineProperty(d,
"__esModule",{value:!0});var c=e(0),b=e(5);f=function(){function a(a){this.hyperLink=a.hyperLink;this.viperLink=a.viperLink;this.links=a.links;this.html=c.wire(this)}a.prototype.render=function(){return a='\n            <h1>About Viperfire</h1>\n            <button data-action=";">Open snackbar</button>\n            <button data-action=";">Open Popup</button>\n            <p>A starter application hosted on Firebase and using \n                <a href=";">;</a> \n                on the client and <a href=";">;</a> on the server\n            </p>\n            <p>Technologies used:</p>\n            <ul>\n                ;\n            </ul>'.split(";"),
a.raw='\n            <h1>About Viperfire</h1>\n            <button data-action=";">Open snackbar</button>\n            <button data-action=";">Open Popup</button>\n            <p>A starter application hosted on Firebase and using \n                <a href=";">;</a> \n                on the client and <a href=";">;</a> on the server\n            </p>\n            <p>Technologies used:</p>\n            <ul>\n                ;\n            </ul>'.split(";"),this.html(a,b.onClick.openSnackbar,b.onClick.openPopup,
this.hyperLink.url,this.hyperLink.name,this.viperLink.url,this.viperLink.name,this.links.map(function(a,b){return d=['\n                    <li><a href="','">',"</a></li>"],d.raw=['\n                    <li><a href="','">',"</a></li>"],c.wire(a)(d,a.url,a.name);var d}));var a};return a}();d.AboutView=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(2),b=e(0),a=e(5);f=function(){function d(a){this.logo=a.logo;this.html=b.wire(this)}d.prototype.render=function(b){var d=this.logo;
if(b.currentUser.signedIn){var h="header-account-link "+c.css.hide;b="header-account-link"}else h="header-account-link",b="header-account-link "+c.css.hide;return e='\n            <a href=";" class="header-logo">;</a>\n            <div class="header-account">\n                <div class=";">\n                    <a href="#" data-action=";" rel="nofollow">Sign In</a>\n                </div>\n                <div class=";">\n                    <a href="#" data-action=";" rel="nofollow">Sign Out</a>\n                </div>\n            </div>'.split(";"),
e.raw='\n            <a href=";" class="header-logo">;</a>\n            <div class="header-account">\n                <div class=";">\n                    <a href="#" data-action=";" rel="nofollow">Sign In</a>\n                </div>\n                <div class=";">\n                    <a href="#" data-action=";" rel="nofollow">Sign Out</a>\n                </div>\n            </div>'.split(";"),this.html(e,d.url,d.name,h,a.onClick.signInOptions,b,a.onClick.signOut);var e};return d}();d.HeaderView=
f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0),b=e(1);f=function(){function a(a){this.html=c.wire(this);this.links=a.links}a.prototype.render=function(a){var d=[];a.currentUser.signedIn&&(d[0]={name:"My Profile",url:b.path.profile(a.currentUser.uid)});return h=['\n            <ul class="footer-list">\n                ',"\n                \n                ","\n            </ul>"],h.raw=['\n            <ul class="footer-list">\n                ',"\n                \n                ",
"\n            </ul>"],this.html(h,this.links.map(function(a,b){return d=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],d.raw=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],c.wire(a)(d,a.url,a.name);var d}),d.map(function(a,b){return d=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],d.raw=['\n                    <li class="footer-list-item"><a href="','">',"</a></li>"],c.wire(a)(d,a.url,a.name);
var d}));var h};return a}();d.FooterView=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function c(){}c.online=!0;return c}();d.env=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=e(6);window.__VIPER__=window.__VIPER__||{user:f.userBuilder.signedOut()};var c=function(){function a(){}a.info=function(a){};a.error=function(a){};a.setUser=function(a){};return a}(),b=function(){function a(){}a.info=function(a){console.info(a)};a.error=function(a){console.error(a)};
a.setUser=function(a){window.__VIPER__.user=a};return a}();d.log=function(a){return a?c:b}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function c(){}c.decodeUnicode=function(b){return decodeURIComponent(atob(b).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))};return c}();d.base64=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(16),b=e(39),a=e(41),h=e(44);f=function(){function d(d){this.authDomain=
new h.AuthDomain(c.app());this.profileDomain=new b.ProfileDomain({firestore:c.firestore(),logger:d.logger});this.articleDomain=new a.ArticleDomain({firestore:c.firestore()})}d.prototype.auth=function(){return this.authDomain};d.prototype.article=function(){return this.articleDomain};d.prototype.profile=function(){return this.profileDomain};return d}();d.Domain=f},function(f,d,e){var c=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(g,h){function k(a){try{e(d.next(a))}catch(z){h(z)}}
function p(a){try{e(d["throw"](a))}catch(z){h(z)}}function e(a){a.done?g(a.value):(new c(function(b){b(a.value)})).then(k,p)}e((d=d.apply(a,b||[])).next())})},b=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,m&&(f=m[c[0]&2?"return":c[0]?"throw":"next"])&&!(f=f.call(m,c[1])).done)return f;if(m=0,f)c=[0,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return h.label++,
{value:c[1],done:!1};case 5:h.label++;m=c[1];c=[0];continue;case 7:c=h.ops.pop();h.trys.pop();continue;default:if(!(f=h.trys,f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){h=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))h.label=c[1];else if(6===c[0]&&h.label<f[1])h.label=f[1],f=c;else if(f&&h.label<f[2])h.label=f[2],h.ops.push(c);else{f[2]&&h.ops.pop();h.trys.pop();continue}}c=b.call(a,h)}catch(z){c=[6,z],m=0}finally{e=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var h=
{label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},e,m,f,l;return l={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(d,"__esModule",{value:!0});var a=e(17),h=e(18),q=e(40);f=function(){function d(a){this.db=a.firestore;this.logger=a.logger;this.cache=new r;this.subscriptions=new n}d.prototype.get=function(d){return c(this,void 0,void 0,function(){var c,g,e,f,m,l,n,t,r,v,C;return b(this,
function(b){switch(b.label){case 0:c=this.cache[d.uid];g=a.path.profile(d.uid);if(c)return this.logger.info("cache hit "+g),[2,{code:h.statusCode.OK,userProfile:c,err:null}];this.logger.info("cache miss "+g);b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this.db.doc(g).get()];case 2:e=b.sent();if(!e.exists)return f=h.domainNotFound(g),m=f.code,l=f.err,n=q.userProfileBuilder.empty(d.uid),[2,{code:m,userProfile:n,err:l}];t=q.userProfileBuilder.fromDB(e.data());return[2,{code:h.statusCode.OK,userProfile:t,
err:null}];case 3:return r=b.sent(),v=h.domainInternalError(g,r.message),m=v.code,l=v.err,C=q.userProfileBuilder.empty(d.uid),[2,{code:m,userProfile:C,err:l}];case 4:return[2]}})})};d.prototype.subscribe=function(b){var c=this,d=a.path.profile(b);this.logger.info("subscribe to "+d);this.subscriptions[b]=this.db.doc(d).onSnapshot(function(a){a.exists?(c.logger.info("add "+d+" to cache"),c.cache[b]=q.userProfileBuilder.fromDB(a.data()),c.logger.info(d+" updated on "+(a.metadata.hasPendingWrites?"Client":
"Server"))):c.unsubscribe(b)})};d.prototype.unsubscribe=function(b){if(""!==b){var c=a.path.profile(b);this.logger.info("unsubscribe to "+c);delete this.cache[b];if(c=this.subscriptions[b])this.logger.info("calling unsubscribe"),c(),this.logger.info("called unsubscribe"),delete this.subscriptions[b]}};return d}();d.ProfileDomain=f;var r=function(){return function(){}}(),n=function(){return function(){}}()},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(6);f=function(){function a(){}
a.empty=function(a){return{uid:a,name:"",email:"",admin:!1,claims:c.userBuilder.defaultClaims}};a.fromDB=function(a){var d=b(a.claims);return{uid:a.uid,name:a.name,email:a.email,admin:d[c.userBuilder.adminClaim],claims:d}};a.fromUser=function(a){var d=b(a.claims);return{uid:a.uid,name:a.name,email:a.email,admin:d[c.userBuilder.adminClaim],claims:d}};a.toUser=function(a,b){return{signedIn:b,uid:a.uid,name:a.name,email:a.email,claims:a.claims}};return a}();d.userProfileBuilder=f;var b=function(a){return a&&
a.hasOwnProperty(c.userBuilder.adminClaim)?a:c.userBuilder.defaultClaims}},function(f,d,e){var c=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(g,h){function e(a){try{p(d.next(a))}catch(t){h(t)}}function k(a){try{p(d["throw"](a))}catch(t){h(t)}}function p(a){a.done?g(a.value):(new c(function(b){b(a.value)})).then(e,k)}p((d=d.apply(a,b||[])).next())})},b=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(h)throw new TypeError("Generator is already executing.");
for(;g;)try{if(h=1,e&&(f=e[c[0]&2?"return":c[0]?"throw":"next"])&&!(f=f.call(e,c[1])).done)return f;if(e=0,f)c=[0,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return g.label++,{value:c[1],done:!1};case 5:g.label++;e=c[1];c=[0];continue;case 7:c=g.ops.pop();g.trys.pop();continue;default:if(!(f=g.trys,f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){g=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))g.label=c[1];else if(6===c[0]&&g.label<f[1])g.label=f[1],f=c;else if(f&&g.label<f[2])g.label=
f[2],g.ops.push(c);else{f[2]&&g.ops.pop();g.trys.pop();continue}}c=b.call(a,g)}catch(t){c=[6,t],e=0}finally{h=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,e,f,l;return l={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(d,"__esModule",{value:!0});var a=e(42),h=e(17),q=e(18),r=e(43);f=function(){function d(a){this.limit=
3;this.db=a.firestore}d.prototype.get=function(d){return c(this,void 0,void 0,function(){var c,e,g,f,l,n,r,w;return b(this,function(b){switch(b.label){case 0:c=h.path.article(d),b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this.db.doc(c).get()];case 2:e=b.sent();if(!e.exists)return g=q.domainNotFound(c),f=g.code,l=g.err,[2,{code:f,article:a.articleBuilder.empty(d),error:l}];n=a.articleBuilder.fromDB(d,e.data());return[2,{code:q.statusCode.OK,article:n,error:null}];case 3:return r=b.sent(),w=q.domainInternalError(c,
r.message),f=w.code,l=w.err,[2,{code:f,article:a.articleBuilder.empty(d),error:l}];case 4:return[2]}})})};d.prototype.queryDraft=function(b){return{status:a.Status.Draft,limit:this.limit,pageToken:b||""}};d.prototype.queryPublished=function(b){return{status:a.Status.Published,limit:this.limit,pageToken:b||""}};d.prototype.all=function(d){return c(this,void 0,void 0,function(){var c,e,g,f,l,n,q,w,t,z,v,C;return b(this,function(b){switch(b.label){case 0:c=this.db.collection(h.path.articles).where("status",
"==",d.status).limit(d.limit);c=d.status===a.Status.Draft?c.orderBy("createTime","desc"):c.orderBy("publishTime","desc");e={articleList:{length:0,pageToken:"",articles:[]},domainError:null};if(""!==d.pageToken){g=r.parsePageToken(d.pageToken);f=g.pageToken;if(l=g.pageTokenError)return e.domainError="could not parse pageToken; error="+l,[2,e];c=c.orderBy("sortID").startAfter(f.time,f.sortID)}b.label=1;case 1:return b.trys.push([1,3,,4]),[4,c.get()];case 2:n=b.sent();if(n.empty)return[2,e];e.articleList.length=
n.docs.length;e.articleList.length>=d.limit&&(q=n.docs[e.articleList.length-1].data(),e.articleList.pageToken=q.status===a.Status.Draft?r.newPageToken(q.createTime,q.sortID):r.newPageToken(q.publishTime,q.sortID));w=0;for(t=n.docs;w<t.length;w++)z=t[w],v=a.articleBuilder.fromDB(z.id,z.data()),e.articleList.articles.push(v);return[2,e];case 3:return C=b.sent(),e.domainError="query article.all() failed; error="+C.message,[2,e];case 4:return[2]}})})};return d}();d.ArticleDomain=f},function(f,d,e){Object.defineProperty(d,
"__esModule",{value:!0});var c;(function(b){b.Draft="draft";b.Published="published"})(c=d.Status||(d.Status={}));f=function(){function b(){}b.setSortID=function(a,b){return{id:a.id,sortID:b,title:a.title,bodyText:a.bodyText,author:a.author,commentCount:a.commentCount,status:a.status,publishTime:a.publishTime,createTime:a.createTime,updateTime:a.updateTime}};b.empty=function(a){return{id:a,sortID:"",title:"",bodyText:"",author:"",commentCount:0,status:c.Draft,publishTime:0x8994df7bcc3c,createTime:Date.now(),
updateTime:Date.now()}};b.toDB=function(a){return{sortID:a.sortID,title:a.title,bodyText:a.bodyText,author:a.author,commentCount:a.commentCount,status:a.status,publishTime:a.publishTime,createTime:a.createTime,updateTime:a.updateTime}};b.fromDB=function(a,b){return{id:a,sortID:b.sortID,title:b.title,bodyText:b.bodyText,author:b.author,commentCount:b.commentCount,status:b.status,publishTime:b.publishTime,createTime:b.createTime,updateTime:b.updateTime}};b.hasError=function(a){return null};return b}();
d.articleBuilder=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});d.newPageToken=function(c,b){return c+"-"+b};d.parsePageToken=function(c){try{var b=c.split("-");return{pageToken:{time:parseInt(b[0],10),sortID:b[1]},pageTokenError:null}}catch(a){return{pageToken:{time:1,sortID:""},pageTokenError:a.message}}}},function(f,d,e){var c=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(g,e){function h(a){try{k(d.next(a))}catch(t){e(t)}}function f(a){try{k(d["throw"](a))}catch(t){e(t)}}
function k(a){a.done?g(a.value):(new c(function(b){b(a.value)})).then(h,f)}k((d=d.apply(a,b||[])).next())})},b=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;g;)try{if(e=1,h&&(f=h[c[0]&2?"return":c[0]?"throw":"next"])&&!(f=f.call(h,c[1])).done)return f;if(h=0,f)c=[0,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return g.label++,{value:c[1],done:!1};case 5:g.label++;h=c[1];
c=[0];continue;case 7:c=g.ops.pop();g.trys.pop();continue;default:if(!(f=g.trys,f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){g=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))g.label=c[1];else if(6===c[0]&&g.label<f[1])g.label=f[1],f=c;else if(f&&g.label<f[2])g.label=f[2],g.ops.push(c);else{f[2]&&g.ops.pop();g.trys.pop();continue}}c=b.call(a,g)}catch(t){c=[6,t],h=0}finally{e=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var g={label:0,sent:function(){if(f[0]&1)throw f[1];
return f[1]},trys:[],ops:[]},e,h,f,l;return l={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(d,"__esModule",{value:!0});var a=e(16),h=e(6);f=function(){function d(a){this.firebase=a;this.cache=new q(a.options)}d.prototype.getClaims=function(a){return c(this,void 0,void 0,function(){var c,d;return b(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,a.getIdToken()];case 1:return c=b.sent(),
[2,h.userBuilder.parseIdToken(c)];case 2:return d=b.sent(),[2,{claims:h.userBuilder.defaultClaims,err:d.message}];case 3:return[2]}})})};d.prototype.onAuthStatChanged=function(a){var d=this;this.firebase.auth().onAuthStateChanged(function(e){return c(d,void 0,void 0,function(){return b(this,function(b){a(e);return[2]})})})};d.prototype.currentUser=function(){return this.cache};d.prototype.signInWithGooglePopup=function(){return c(this,void 0,void 0,function(){var c,d;return b(this,function(b){c=new a.auth.GoogleAuthProvider;
d={firebase:this.firebase,provider:c};return[2,(new r(d)).signIn()]})})};d.prototype.signInWithFacebookPopup=function(){return c(this,void 0,void 0,function(){var c,d;return b(this,function(b){c=new a.auth.FacebookAuthProvider;d={firebase:this.firebase,provider:c};return[2,(new r(d)).signIn()]})})};d.prototype.signInWithTwitterPopup=function(){return c(this,void 0,void 0,function(){var c,d;return b(this,function(b){c=new a.auth.TwitterAuthProvider;d={firebase:this.firebase,provider:c};return[2,(new r(d)).signIn()]})})};
d.prototype.signInWithEmail=function(d){return c(this,void 0,void 0,function(){var c,e,g,f;return b(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),new a.auth.EmailAuthProvider,[4,this.firebase.auth().signInWithEmailAndPassword(d.email,d.password)];case 1:return e=c=b.sent(),[2,{currentUser:h.userBuilder.fromFirebase(e),err:""}];case 2:return f=g=b.sent(),[2,{currentUser:null,err:f.message}];case 3:return[2]}})})};d.prototype.signOut=function(){return c(this,void 0,void 0,function(){return b(this,
function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.firebase.auth().signOut()];case 1:return a.sent(),[2,!0];case 2:return a.sent(),[2,!1];case 3:return[2]}})})};return d}();d.AuthDomain=f;var q=function(){function a(a){this.key="firebase:authUser:"+a.apiKey+":[DEFAULT]"}a.prototype.getFromCache=function(){if(!window.localStorage)return{currentUser:null,err:"no local storage in this browser"};var a=localStorage.getItem(this.key);if(!a)return{currentUser:null,err:"no user exists in local storage; apiKey="+
this.key};try{var b=JSON.parse(a);return{currentUser:h.userBuilder.fromFirebase(b),err:""}}catch(k){return{currentUser:null,err:"local storage JSON.parse(text); test="+a+"; error="+k.message}}};return a}(),r=function(){function a(a){this.firebase=a.firebase;this.provider=a.provider}a.prototype.signIn=function(){return c(this,void 0,void 0,function(){var a,c,d,g;return b(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,this.firebase.auth().signInWithPopup(this.provider)];case 1:return a=
b.sent(),c=a.user,[2,{currentUser:h.userBuilder.fromFirebase(c),err:""}];case 2:return g=d=b.sent(),[2,{currentUser:null,err:g.message}];case 3:return[2]}})})};return a}()},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(0),b=e(13),a=e(10),h=e(12),q=e(15),r=e(1),n=e(46),l=e(14);f=function(){function d(a){this.pageNumber=0;this.renderBody=c.bind(a.body);this.view=a.view;this.presenter=a.presenter;this.logger=a.logger}d.prototype.loading=function(a){n.loader.start(this);this.pageNumber++;
this.logger.info("loading("+this.pageNumber+")="+a);return this.pageNumber};d.prototype.showArticleList=function(a,c){var d=this;this.showPage(a,function(){var a=b.ArticleListPresenter.Next(d.presenter,c);d.renderArticleList(a)})};d.prototype.renderArticleList=function(a){document.title=a.title;this.view.renderArticleList(this.renderBody,a);this.presenter=a};d.prototype.showArticle=function(a,b){var c=this;this.showPage(a,function(){var a=l.ArticlePresenter.Next(c.presenter,b);c.renderArticle(a)})};
d.prototype.renderArticle=function(a){document.title=a.title;this.view.renderArticle(this.renderBody,a);this.presenter=a};d.prototype.showProfile=function(b,c){var d=this;this.showPage(b,function(){var b=a.ProfilePresenter.Next(d.presenter,c);d.renderProfile(b)})};d.prototype.renderProfile=function(a){document.title=a.title;this.view.renderProfile(this.renderBody,a);this.presenter=a};d.prototype.showAbout=function(a){var b=this;this.showPage(a,function(){var a=h.AboutPresenter.Next(b.presenter);b.renderAbout(a)})};
d.prototype.renderAbout=function(a){this.view.renderAbout(this.renderBody,a);document.title=a.title;this.presenter=a};d.prototype.showPage=function(a,b){try{a===this.pageNumber?(n.loader.done(this),b(),n.loader.reset(this),window.scrollTo(0,0)):this.logger.info("cancel visit => "+a+" !== "+this.pageNumber)}catch(p){this.showError(a,500,p.message)}};d.prototype.showError=function(a,b,c){this.logger.error("visit error; code="+b+"; error="+c);a===this.pageNumber?(n.loader.done(this),a=q.ErrorPresenter.FromCode(b,
this.presenter),this.renderError(a),n.loader.reset(this),window.scrollTo(0,0)):this.logger.info("cancel error visit => "+a+" !== "+this.pageNumber)};d.prototype.renderError=function(a){this.view.renderError(this.renderBody,a);document.title=a.title;this.presenter=a};d.prototype.render=function(){try{switch(this.presenter.path){case r.path.articles:this.renderArticleList(this.presenter);break;case r.path.articleRegExp:this.renderArticle(this.presenter);break;case r.path.about:this.renderAbout(this.presenter);
break;case r.path.profileReqExp:this.renderProfile(this.presenter);break;case r.path.error:this.renderError(this.presenter);break;default:this.logger.error("page.Render() failed; error=path="+r.path+" not found")}}catch(k){this.logger.error("page.Render() failed; error="+k.message)}};return d}();d.Page=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(7);f=function(){function b(){}b.start=function(a){b.resetNow(a);a.presenter.pageLoader=c.PageLoader.Loading;a.render()};b.reset=
function(a){a.pageNumber===a.pageNumber&&b.resetNow(a)};b.done=function(a){a.pageNumber===a.pageNumber&&(a.presenter.pageLoader===c.PageLoader.Loading&&(a.presenter.pageLoader=c.PageLoader.Done),a.render())};b.resetNow=function(a){a.presenter.pageLoader!==c.PageLoader.Neutral&&(a.presenter.pageLoader=c.PageLoader.Neutral,a.render())};return b}();d.loader=f},function(f,d,e){var c=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(g,e){function f(a){try{p(d.next(a))}catch(z){e(z)}}
function h(a){try{p(d["throw"](a))}catch(z){e(z)}}function p(a){a.done?g(a.value):(new c(function(b){b(a.value)})).then(f,h)}p((d=d.apply(a,b||[])).next())})},b=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError("Generator is already executing.");for(;e;)try{if(f=1,h&&(m=h[c[0]&2?"return":c[0]?"throw":"next"])&&!(m=m.call(h,c[1])).done)return m;if(h=0,m)c=[0,m.value];switch(c[0]){case 0:case 1:m=c;break;case 4:return e.label++,
{value:c[1],done:!1};case 5:e.label++;h=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(m=e.trys,m=0<m.length&&m[m.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!m||c[1]>m[0]&&c[1]<m[3]))e.label=c[1];else if(6===c[0]&&e.label<m[1])e.label=m[1],m=c;else if(m&&e.label<m[2])e.label=m[2],e.ops.push(c);else{m[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(z){c=[6,z],h=0}finally{f=m=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e=
{label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,h,m,l;return l={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(d,"__esModule",{value:!0});var a=e(6),h=e(11),q=e(8),r=e(48),n=e(49);f=function(){function d(a){this.page=a.page;this.domain=a.domain;this.logger=a.logger;this.snackbar=new n.SnackbarHelper({page:this.page,logger:this.logger});this.signInForm=new r.SignInFormHelper({page:this.page,
logger:this.logger})}d.prototype.rootVisit=function(a){this.root(a,"rootVisit")};d.prototype.rootBack=function(a){this.root(a,"rootBack")};d.prototype.root=function(a,d){return c(this,void 0,void 0,function(){var c,e,f,h,m;return b(this,function(b){switch(b.label){case 0:return c=this.page.loading(d),e=this.domain.article().queryDraft(a),[4,this.domain.article().all(e)];case 1:f=b.sent();h=f.articleList;if(m=f.domainError)return this.page.showError(c,500,m),[2];this.page.showArticleList(c,h);return[2]}})})};
d.prototype.articleVisit=function(a){this.article(a,"articleVisit")};d.prototype.articleBack=function(a){this.article(a,"articleBack")};d.prototype.article=function(a,d){return c(this,void 0,void 0,function(){var c,e,f,h,m;return b(this,function(b){switch(b.label){case 0:return c=this.page.loading(d),[4,this.domain.article().get(a)];case 1:e=b.sent();f=e.code;h=e.article;if(m=e.error)return this.page.showError(c,f,m),[2];this.page.showArticle(c,h);return[2]}})})};d.prototype.aboutVisit=function(){this.about("aboutVisit")};
d.prototype.aboutBack=function(){this.about("aboutBack")};d.prototype.about=function(a){a=this.page.loading(a);this.page.showAbout(a)};d.prototype.profileVisit=function(a){this.profile(a,"profileVisit")};d.prototype.profileBack=function(a){this.profile(a,"profileBack")};d.prototype.profile=function(a,d){return c(this,void 0,void 0,function(){var c,e,f,h,m;return b(this,function(b){switch(b.label){case 0:return c=this.page.loading(d),[4,this.domain.profile().get({uid:a})];case 1:e=b.sent();f=e.code;
h=e.userProfile;if(m=e.err)return this.page.showError(c,f,m),[2];this.page.showProfile(c,h);return[2]}})})};d.prototype.onUserStateChanged=function(d){return c(this,void 0,void 0,function(){var c,e,f,h,m;return b(this,function(b){switch(b.label){case 0:c=a.userBuilder.signedOut();d?(c=a.userBuilder.fromFirebase(d),this.logger.info("signed in as: "+c.name),this.page.presenter.currentUser=c,this.domain.profile().subscribe(d.uid),this.snackbar.showSignedIn(c.email)):(this.logger.info("signed out"),e=
this.page.presenter.currentUser.uid,this.page.presenter.currentUser=c,this.domain.profile().unsubscribe(e));if(!d)return[3,2];this.logger.info("getClaims()");return[4,this.domain.auth().getClaims(d)];case 1:f=b.sent(),h=f.claims,(m=f.err)&&this.logger.error(m),this.page.presenter.currentUser=a.userBuilder.withClaims(this.page.presenter.currentUser,h),b.label=2;case 2:return this.page.render(),this.logger.setUser(this.page.presenter.currentUser),[2]}})})};d.prototype.closeAuthModal=function(){this.logger.info("app.closeAuthModal()");
this.page.presenter.auth=q.Auth.hide;this.page.render()};d.prototype.showSignInOptions=function(){this.logger.info("app.showSignInOptions()");this.page.presenter.auth=q.Auth.signInOptions;this.page.render()};d.prototype.showSignInWithEmail=function(){this.logger.info("app.showSignInWithEmail()");this.page.presenter.auth=q.Auth.signInWithEmail;this.page.render()};d.prototype.showSignUpOptions=function(){this.logger.info("app.showSignUpOptions()");this.page.presenter.auth=q.Auth.signUpOptions;this.page.render()};
d.prototype.showSignUpWithEmail=function(){this.logger.info("app.showSignUpWithEmail()");this.page.presenter.auth=q.Auth.signUpWithEmail;this.page.render()};d.prototype.submitSignInWithEmail=function(a){return c(this,void 0,void 0,function(){var c,d,e,f,h,m;return b(this,function(b){switch(b.label){case 0:this.logger.info("app.submitSignInWithEmail()");this.signInForm.disableSubmit();c=this.signInForm.checkValidity(a);d=c.data;e=c.valid;if(!e)return[3,2];this.logger.info("submit data: "+d);return[4,
this.domain.auth().signInWithEmail(d)];case 1:f=b.sent(),h=f.currentUser,m=f.err,null===h&&(this.showPopup({title:"Sign in with Email failed",main:m}),this.logger.error("signInWithEmail failed; error="+m)),this.closeAuthModal(),b.label=2;case 2:return this.logger.info(this.page.presenter.signInForm),[2]}})})};d.prototype.showSnackbar=function(){this.snackbar.showUndo()};d.prototype.hideSnackbar=function(){this.snackbar.close()};d.prototype.hidePopup=function(){this.logger.info("app.closePopup()");
this.page.presenter.popup=new h.HiddenPopup;this.page.render()};d.prototype.showPopup=function(a){this.logger.info("app.showPopup()");this.page.presenter.popup=new h.ErrorPopup(a);this.page.render()};return d}();d.App=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function c(c){this.page=c.page;this.logger=c.logger}c.prototype.disableSubmit=function(){this.page.presenter.signInForm.disableSubmit=!0;this.page.render()};c.prototype.enableSubmit=function(){this.page.presenter.signInForm.disableSubmit=
!1;this.page.render()};c.prototype.checkValidity=function(c){var a=c.email,b=a.value.trim(),d=c.password,e=d.value;this.page.presenter.signInForm.disableSubmit=!1;if(c.checkValidity())return c.reset(),this.page.presenter.signInForm.emailError=!1,this.page.presenter.signInForm.passwordError=!1,this.page.render(),{data:{email:b,password:e},valid:!0};this.page.presenter.signInForm.emailError=!a.validity.valid;this.page.presenter.signInForm.passwordError=!d.validity.valid;this.page.render();return{data:{email:b,
password:e},valid:!1}};return c}();d.SignInFormHelper=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(9);f=function(){function b(a){this.page=a.page;this.logger=a.logger;this.clear=this.clear.bind(this);this.slideOut=this.slideOut.bind(this);this.hide=this.hide.bind(this)}b.prototype.showUndo=function(){this.logger.info("snackbar.showUndo()");this.show(new c.ActionSnackbar({text:"Did something",actionText:"undo",action:"undo"}))};b.prototype.showSignedIn=function(a){this.logger.info("snackbar.showSignedIn()");
this.show(new c.SignedInSnackbar({email:a}))};b.prototype.close=function(){var a=this.page.presenter.snackbar.version+1;this.page.presenter.snackbar.version=a;this.slideOut(a)};b.prototype.nextState=function(){var a=this.page.presenter.snackbar.state;switch(a){case c.state.hide:return c.state.slideIN;case c.state.slideOut:return c.state.slideIN;case c.state.slideIN:return c.state.blink;case c.state.blink:return c.state.blink;case c.state.clear:return c.state.blink;default:return this.logger.error("current state: "+
a+" has no next state"),c.state.hide}};b.prototype.show=function(a){var b=this.page.presenter.snackbar.version+1,d=this.nextState();this.logger.info("snackbar.show(); state:"+d+"; version:"+b);a.version=b;a.state=d;this.page.presenter.snackbar=a;this.page.render();switch(d){case c.state.slideIN:setTimeout(this.slideOut,5E3,b);break;case c.state.blink:setTimeout(this.clear,500,b);break;default:this.logger.error("current state:"+c.state+" has no next state"),setTimeout(this.slideOut,5E3,b)}};b.prototype.clear=
function(a){if(this.page.presenter.snackbar.version!==a)this.logger.info("snackbar.clear(); version:"+a+" - skipping");else{var b=this.page.presenter.snackbar.version+1;this.logger.info("snackbar.clear(); clear version:"+a+"; new version:"+b);this.page.presenter.snackbar.version=b;this.page.presenter.snackbar.state=c.state.clear;this.page.render();setTimeout(this.slideOut,4E3,b)}};b.prototype.slideOut=function(a){this.page.presenter.snackbar.version!==a?this.logger.info("snackbar.slideOut(); version:"+
a+" - skipping"):(this.logger.info("snackbar.slideOut(); version:"+a),a+=1,this.page.presenter.snackbar.version=a,this.page.presenter.snackbar.state=c.state.slideOut,this.page.render(),setTimeout(this.hide,600,a))};b.prototype.hide=function(a){this.page.presenter.snackbar.version!==a?this.logger.info("snackbar.hide(); version:"+a+" - skipping"):(this.logger.info("snackbar.hide(); version:"+a),this.page.presenter.snackbar=new c.HiddenSnackbar(this.page.presenter.snackbar.version+1),this.page.render())};
return b}();d.SnackbarHelper=f},function(f,d,e){var c=this&&this.__awaiter||function(a,c,b,d){return new (b||(b=Promise))(function(e,f){function h(a){try{g(d.next(a))}catch(u){f(u)}}function k(a){try{g(d["throw"](a))}catch(u){f(u)}}function g(a){a.done?e(a.value):(new b(function(c){c(a.value)})).then(h,k)}g((d=d.apply(a,c||[])).next())})},b=this&&this.__generator||function(a,c){function b(a){return function(c){return d([a,c])}}function d(b){if(f)throw new TypeError("Generator is already executing.");
for(;e;)try{if(f=1,h&&(k=h[b[0]&2?"return":b[0]?"throw":"next"])&&!(k=k.call(h,b[1])).done)return k;if(h=0,k)b=[0,k.value];switch(b[0]){case 0:case 1:k=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++;h=b[1];b=[0];continue;case 7:b=e.ops.pop();e.trys.pop();continue;default:if(!(k=e.trys,k=0<k.length&&k[k.length-1])&&(6===b[0]||2===b[0])){e=0;continue}if(3===b[0]&&(!k||b[1]>k[0]&&b[1]<k[3]))e.label=b[1];else if(6===b[0]&&e.label<k[1])e.label=k[1],k=b;else if(k&&e.label<k[2])e.label=
k[2],e.ops.push(b);else{k[2]&&e.ops.pop();e.trys.pop();continue}}b=c.call(a,e)}catch(u){b=[6,u],h=0}finally{f=k=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var e={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},f,h,k,g;return g={next:b(0),"throw":b(1),"return":b(2)},"function"===typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g};Object.defineProperty(d,"__esModule",{value:!0});d.actionName="data-action";f=function(){function a(a){this.logger=
a.logger;this.app=a.app;this.auth=a.domain.auth();this.auth.onAuthStatChanged(this.OnAuthStateChanged.bind(this));document.body.addEventListener("click",this);document.body.addEventListener("submit",this)}a.prototype.handleEvent=function(a){try{var b=a.target;try{if("getAttribute"in b){var c=b.getAttribute(d.actionName);if(c)this[c+"On"+a.type](a)}}catch(n){this.logger.error("actions.handleEvent() failed; type="+a.type+", element="+b+", error="+n.message)}}catch(n){this.logger.error("actions.handleEvent() failed; error="+
n.message)}};a.prototype.openSnackbarOnclick=function(a){this.app.showSnackbar()};a.prototype.openPopupOnclick=function(a){this.app.showPopup({title:"This is a test",main:"This is the body message."})};a.prototype.closeSnackbarOnclick=function(a){this.app.hideSnackbar()};a.prototype.closePopupOnclick=function(a){this.app.hidePopup()};a.prototype.OnAuthStateChanged=function(a){this.app.onUserStateChanged(a)};a.prototype.closeAuthOnclick=function(a){return c(this,void 0,void 0,function(){return b(this,
function(b){a.preventDefault();this.app.closeAuthModal();return[2]})})};a.prototype.signInOptionsOnclick=function(a){return c(this,void 0,void 0,function(){return b(this,function(b){a.preventDefault();this.app.showSignInOptions();return[2]})})};a.prototype.signInWithGoogleOnclick=function(a){return c(this,void 0,void 0,function(){var c,d,e;return b(this,function(b){switch(b.label){case 0:return a.preventDefault(),this.app.closeAuthModal(),[4,this.auth.signInWithGooglePopup()];case 1:return c=b.sent(),
d=c.currentUser,e=c.err,null===d&&(this.app.showPopup({title:"Sign in with Google failed",main:e}),this.logger.error("signInWithGoogleOnclick failed; error="+e)),[2]}})})};a.prototype.signInWithFacebookOnclick=function(a){return c(this,void 0,void 0,function(){var c,d,e;return b(this,function(b){switch(b.label){case 0:return a.preventDefault(),this.app.closeAuthModal(),[4,this.auth.signInWithFacebookPopup()];case 1:return c=b.sent(),d=c.currentUser,e=c.err,null===d&&(this.app.showPopup({title:"Sign in with Facebook failed",
main:e}),this.logger.error("signInWithFacebookOnclick failed; error="+e)),[2]}})})};a.prototype.signInWithTwitterOnclick=function(a){return c(this,void 0,void 0,function(){var c,d,e;return b(this,function(b){switch(b.label){case 0:return a.preventDefault(),this.app.closeAuthModal(),[4,this.auth.signInWithTwitterPopup()];case 1:return c=b.sent(),d=c.currentUser,e=c.err,null===d&&(this.app.showPopup({title:"Sign in with Twitter failed",main:e}),this.logger.error("signInWithTwitterOnclick failed; error="+
e)),[2]}})})};a.prototype.signInWithEmailOnclick=function(a){return c(this,void 0,void 0,function(){return b(this,function(b){a.preventDefault();this.app.showSignInWithEmail();return[2]})})};a.prototype.signUpOptionsOnclick=function(a){return c(this,void 0,void 0,function(){return b(this,function(b){a.preventDefault();this.app.showSignUpOptions();return[2]})})};a.prototype.signUpWithEmailOnclick=function(a){return c(this,void 0,void 0,function(){return b(this,function(b){a.preventDefault();this.app.showSignUpWithEmail();
return[2]})})};a.prototype.signOutOnclick=function(a){return c(this,void 0,void 0,function(){var c;return b(this,function(b){switch(b.label){case 0:return a.preventDefault(),[4,this.auth.signOut()];case 1:return c=b.sent(),c||(this.app.showPopup({title:"Sign out failed",main:"We could not sign you out"}),this.logger.error("signOutOnclick failed!")),[2]}})})};a.prototype.signInFormOnsubmit=function(a){return c(this,void 0,void 0,function(){var c;return b(this,function(b){a.preventDefault();try{c=a.target,
this.app.submitSignInWithEmail(c)}catch(n){this.logger.error("SignInFormOnsubmit error"),this.logger.error(n)}return[2]})})};a.prototype.cleanup=function(){document.body.removeEventListener("click",this);document.body.removeEventListener("submit",this)};return a}();d.ActionHandler=f},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e(52),b=e(57),a=e(1);d.router=function(d){var e=c();e.get(a.path.articles,function(a){var c=b.url.Query()("page_token");"pushstate"===a.type?d.rootVisit(c):
d.rootBack(c)});e.get(a.path.articleRegExp,function(a){var b=a.params.id;"pushstate"===a.type?d.articleVisit(b):d.articleBack(b)});e.get(a.path.about,function(a){"pushstate"===a.type?d.aboutVisit():d.aboutBack()});e.get(a.path.profileReqExp,function(a){var b=a.params.id;"pushstate"===a.type?d.profileVisit(b):d.profileBack(b)});e.get("*",function(a){window.location.reload(!1)})}},function(f,d,e){(function(c){var b=function(){function a(a,b){"string"!==typeof a&&(a=a.toString(),a=a.slice(1,a.lastIndexOf("/")));
return n(a,b)}function b(a,b){for(var c,d={},e=1,f=a.length;e<f;e++)(c=a[e])&&(d[b[e-1].name]=c);return d}function d(){this.parentNode.removeChild(this)}function f(){this._params={};this._paths={};c.addEventListener("popstate",this,!1);c.addEventListener("pushstate",this,!1)}e(54);var n=e(55),l=f.prototype;l.get=function(b){var c=[],d=a(b,c);c=this._paths[d]||(this._paths[d]={keys:c,cb:[],re:d});d=1;for(var e=arguments.length;d<e;d++)c.cb.push(arguments[d]);return this};l.delete=function(b){var c=
a(b,[]);c=this._paths[c];for(var d=1,e=arguments.length;d<e;d++){var f=arguments[d];f=c?c.cb.lastIndexOf(f):-1;-1<f&&c.cb.splice(f,1)}return this};l.use=function(a,b){a=[].concat(a);for(var c=0,d=a.length;c<d;c++)this.get(a[c],b);return this};l.param=function(a,b){a=[].concat(a);for(var c=0,d=a.length;c<d;c++)this._params[a[c]]=b;return this};l.navigate=function(a,b){switch(!0){case !!b:switch(!0){case !!b.replace:case !!b.replaceState:history.replaceState(history.state,document.title,a)}break;case a===
location.pathname+location.search:this.handleEvent({type:"samestate"});break;default:var c=document;b=c.documentElement;c=c.createElement("a");c.href=a;c.onclick=d;b.insertBefore(c,b.firstChild);c.click()}return this};l.handleEvent=function(a){var c=this._paths,d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d],f=e.re.exec(location.pathname);if(f){var h=[],m=[],l=this._params,n={params:b(f,e.keys),type:a.type},q=0,r=e.cb.length;for(d in n.params)l.hasOwnProperty(d)&&m.push(d);(function D(){m.length?
(d=m.shift(),l[d](n,D,n.params[d])):function R(){if(q<r){var a=e.cb[q++];0>h.lastIndexOf(a)?(h.push(a),a(n,R)):R()}}()})();break}}};return function(){return new f}}();f.exports=(c.hyperHTML||{}).app=b}).call(d,e(53))},function(f,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(d=window)}f.exports=d},function(f,d){document.addEventListener("click",function(d){var c=d.target;var b=(c.closest||function(a){for(;c&&c.nodeName!==a;)c=
c.parentNode;return c}).call(c,"A");if(b&&/^(?:_self)?$/i.test(b.target)&&!b.hasAttribute("download")&&"external"!==b.getAttribute("rel")){var a=new URL(b.href);b=location;if(a.origin===b.origin){var e=a.pathname+a.search;a=a.hash;var f=!0;d.preventDefault();if(e===b.pathname+b.search)/^#[a-z][a-z0-9.:_-]+$/i.test(a)&&(c=document.querySelector(a+',[name="'+a.slice(1)+'"]'))&&(d.preventDefault=function(){f=!1},setTimeout(function(){f&&c.scrollIntoView(!0)})),history.replaceState(history.state,document.title,
e+a);else{var r=new CustomEvent("pushstate");r.state=b.href;setTimeout(function(){dispatchEvent(r);window.onpushstate&&onpushstate(r)});history.pushState(r.state,document.title,e+a)}}}},!0)},function(f,d,e){function c(a,b){var c=[],d=0,e=0,f="";b=b&&b.delimiter||"/";for(var g;null!=(g=k.exec(a));){var h=g[0],m=g[1],p=g.index;f+=a.slice(e,p);e=p+h.length;if(m)f+=m[1];else{var l=a[e];h=g[2];m=g[3];var n=g[4],r=g[5],y=g[6];p=g[7];f&&(c.push(f),f="");l=null!=h&&null!=l&&l!==h;var A="+"===y||"*"===y;y=
"?"===y||"*"===y;g=g[2]||b;n=n||r;c.push({name:m||d++,prefix:h||"",delimiter:g,optional:y,repeat:A,partial:l,asterisk:!!p,pattern:n?n.replace(/([=!:$\/()])/g,"\\$1"):p?".*":"[^"+q(g)+"]+?"})}}e<a.length&&(f+=a.substr(e));f&&c.push(f);return c}function b(a){return encodeURI(a).replace(/[\/?#]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function a(a){return encodeURI(a).replace(/[?#]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function h(c){for(var d=
Array(c.length),e=0;e<c.length;e++)"object"===typeof c[e]&&(d[e]=new RegExp("^(?:"+c[e].pattern+")$"));return function(e,f){var g="";e=e||{};f=(f||{}).pretty?b:encodeURIComponent;for(var h=0;h<c.length;h++){var k=c[h];if("string"===typeof k)g+=k;else{var l=e[k.name];if(null==l)if(k.optional){k.partial&&(g+=k.prefix);continue}else throw new TypeError('Expected "'+k.name+'" to be defined');if(m(l)){if(!k.repeat)throw new TypeError('Expected "'+k.name+'" to not repeat, but received `'+JSON.stringify(l)+
"`");if(0===l.length)if(k.optional)continue;else throw new TypeError('Expected "'+k.name+'" to not be empty');for(var p=0;p<l.length;p++){var n=f(l[p]);if(!d[h].test(n))throw new TypeError('Expected all "'+k.name+'" to match "'+k.pattern+'", but received `'+JSON.stringify(n)+"`");g+=(0===p?k.prefix:k.delimiter)+n}}else{n=k.asterisk?a(l):f(l);if(!d[h].test(n))throw new TypeError('Expected "'+k.name+'" to match "'+k.pattern+'", but received "'+n+'"');g+=k.prefix+n}}}return g}}function q(a){return a.replace(/([.+*?=^!:${}()[\]|\/\\])/g,
"\\$1")}function r(a,b){a.keys=b;return a}function n(a,b,c){m(b)||(c=b||c,b=[]);c=c||{};for(var d=c.strict,e=!1!==c.end,f="",g=0;g<a.length;g++){var h=a[g];if("string"===typeof h)f+=q(h);else{var k=q(h.prefix),l="(?:"+h.pattern+")";b.push(h);h.repeat&&(l+="(?:"+k+l+")*");l=h.optional?h.partial?k+"("+l+")?":"(?:"+k+"("+l+"))?":k+"("+l+")";f+=l}}a=q(c.delimiter||"/");g=f.slice(-a.length)===a;d||(f=(g?f.slice(0,-a.length):f)+"(?:"+a+"(?=$))?");return r(new RegExp("^"+(e?f+"$":f+(d&&g?"":"(?="+a+"|$)")),
c.sensitive?"":"i"),b)}function l(a,b,d){m(b)||(d=b||d,b=[]);d=d||{};if(a instanceof RegExp){if(d=a.source.match(/\((?!\?)/g))for(var e=0;e<d.length;e++)b.push({name:e,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return r(a,b)}if(m(a)){e=[];for(var f=0;f<a.length;f++)e.push(l(a[f],b,d).source);a=new RegExp("(?:"+e.join("|")+")",d.sensitive?"":"i");return r(a,b)}return n(c(a,d),b,d)}var m=e(56);f.exports=l;f.exports.parse=c;f.exports.compile=function(a,b){return h(c(a,
b))};f.exports.tokensToFunction=h;f.exports.tokensToRegExp=n;var k=/(\\.)|([\/.])?(?:(?:\:(\w+)(?:\(((?:\\.|[^\\()])+)\))?|\(((?:\\.|[^\\()])+)\))([+*?])?|(\*))/g},function(f,d){f.exports=Array.isArray||function(d){return"[object Array]"==Object.prototype.toString.call(d)}},function(f,d,e){Object.defineProperty(d,"__esModule",{value:!0});f=function(){function b(){}b.Query=function(a){var b=new c,d=function(a){try{return b[a]||""}catch(k){return""}};try{a||(a=window.location.search.substring(1));var e=
decodeURIComponent(a);if(!e||""===e)return d;a=0;for(var f=e.split("&");a<f.length;a++){var l=f[a].split("=");2===l.length&&(b[l[0]]=l[1])}return d}catch(m){return d}};return b}();d.url=f;var c=function(){return function(){}}()}])}]);
